public with sharing class CustomerFactVulnerabilityUpsert {

    //The method is invocable to ensure this can be called from a flow, allowing us to use this within declarative automation. 
    @InvocableMethod(label = 'Upsert customer facts' description = 'Pass in a list of customer facts and have these upserted.' category = 'Flow')
    public static List<FlowOutputs> upsertInvocable(List<FlowInputs> requests){
        List<FlowOutputs> results = new List<FlowOutputs>();
        for (FlowInputs request : requests) {
            FlowOutputs result = new FlowOutputs();
            result.success = CustomerFactVulnerabilityHandler.upsertFacts(request.customerFacts);
            results.add(result);
        }
        return results;
    }

    public class FlowInputs{
        @InvocableVariable
        public List<CustomerFact__c> customerFacts;
    }

    public class FlowOutputs{
        @InvocableVariable
        public Boolean success;
    }
}