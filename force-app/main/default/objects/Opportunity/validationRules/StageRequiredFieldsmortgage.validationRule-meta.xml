<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>StageRequiredFieldsmortgage</fullName>
    <active>true</active>
    <description>Ensures that a number of fields are populated prior to progressing past the initial mortgage opportunity stage.</description>
    <errorConditionFormula>!$Setup.SystemConfiguration__c.ValidationBypass__c
&amp;&amp;
RecordType.DeveloperName = &quot;OW_mortgage&quot;
&amp;&amp; 
( ISPICKVAL( StageName, &quot;Provide advice&quot; ) 
||
ISPICKVAL( StageName, &quot;Broker mortgage&quot; ) 
||
ISPICKVAL( StageName, &quot;Await completion&quot; )
||
ISPICKVAL( StageName, &quot;Completed&quot; ) )
&amp;&amp; 
( ISBLANK( OW_date_precise_fp_fact_find_sent__c )
||
ISBLANK( Amount )
||
ISBLANK( CloseDate )
||
ISBLANK( OW_date_of_initial_interest__c ) )</errorConditionFormula>
    <errorDisplayField>StageName</errorDisplayField>
    <errorMessage>To proceed, please ensure you have specified the following fields: amount, close date, date PreciseFP fact find sent, date of initial interest.</errorMessage>
</ValidationRule>
