<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>NewBusinessProtectionPartner</fullName>
    <active>true</active>
    <description>If a product is a protection policy, it must either be pre-existing or the provider must be a protection partner</description>
    <errorConditionFormula>ISPICKVAL(BusinessType__c  , &quot;New business&quot; ) 
&amp;&amp;
(
CONTAINS(TEXT(Subtype__c) , &quot;Cover&quot;) ||
CONTAINS(TEXT(Subtype__c) , &quot;Life&quot;) ||
CONTAINS(TEXT(Subtype__c) , &quot;Income&quot;) )
&amp;&amp;
NOT(Public_Provider_Name__r.ProtectionPartner__c )</errorConditionFormula>
    <errorMessage>If a product is a protection policy, it must either be pre-existing or the provider must be a protection partner</errorMessage>
</ValidationRule>
