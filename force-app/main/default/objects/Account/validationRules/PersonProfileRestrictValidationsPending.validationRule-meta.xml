<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>PersonProfileRestrictValidationsPending</fullName>
    <active>false</active>
    <description>Prevents editing of profile fields on the person account when there are client profile validations outstanding. Allows updates to all other fields.</description>
    <errorConditionFormula>!$Setup.SystemConfiguration__c.ValidationBypass__c 
&amp;&amp;
RecordType.DeveloperName = &quot;PersonAccount&quot;
&amp;&amp;
Household_Lookup__r.Fact_Find_Validations_Outstanding__c = true
&amp;&amp;
NOT(ISNEW())
&amp;&amp;
NOT(ISCHANGED(Stop_Internal_User_Update__c))
&amp;&amp;
NOT(ISCHANGED(Household_Lookup__c))
&amp;&amp;
(ISCHANGED(ShippingStreet) ||
ISCHANGED(ShippingCity) ||
ISCHANGED(ShippingState) ||
ISCHANGED(ShippingCountry) ||
ISCHANGED(ShippingPostalCode) ||
ISCHANGED(FirstName) ||
ISCHANGED(LastName) ||
ISCHANGED(MiddleName) ||
ISCHANGED(PersonBirthdate) ||
ISCHANGED(Working_Situation__c) ||
ISCHANGED(Retirement_Target__c) ||
ISCHANGED(Household_Lookup__c) ||
ISCHANGED(Discovery_Level_of_Risk__c) ||
ISCHANGED(Dual_Nationality__c) ||
ISCHANGED(National_Insurance_Number__pc) ||
ISCHANGED(FinServ__MaritalStatus__pc) ||
ISCHANGED(Nationality__pc) ||
ISCHANGED(Country_of_Residence__c) ||
ISCHANGED(Country_of_Domicile__c) ||
ISCHANGED(In_Good_Health__pc) ||
ISCHANGED(Smoker__pc) ||
ISCHANGED(Smoked_in_Last_12_Months__pc) ||
ISCHANGED(Medical_conditions__pc) ||
ISCHANGED(Recent_Windfalls_Inheritance__c) ||
ISCHANGED(Expected_Windfalls__c) ||
ISCHANGED(Valid_Will_in_Place__c) ||
ISCHANGED(Is_Will_Up_to_Date__c) ||
ISCHANGED(Power_of_Attorney_in_Place__c) ||
ISCHANGED(LTA_Protection__c) ||
ISCHANGED(LTA_Protection_Type__c) ||
ISCHANGED(Do_you_anticioate_any_changes_to_income__c) ||
ISCHANGED(Anticipated_Changes_to_Income__c) ||
ISCHANGED(Cost_of_Childcare__c) ||
ISCHANGED(Cost_of_Childcare_Frequency__c) ||
ISCHANGED(Costs_of_Education__c) ||
ISCHANGED(Cost_of_Education_Frequency__c) ||
ISCHANGED(Power_of_Attorney_Types__c) ||
ISCHANGED(Bank_Name__c) ||
ISCHANGED(Bank_Account_Name__c) ||
ISCHANGED(Bank_Account_Number__c) ||
ISCHANGED(Bank_sort_code__c) ||
ISCHANGED(FinServ__Notes__c) ||
ISCHANGED(FinServ__PreferredName__pc) ||
ISCHANGED(FinServ__CountryOfBirth__pc) ||
ISCHANGED(Do_you_have_any_connections_with_the_USA__c) ||
ISCHANGED(OW_third_nationality__c))
&amp;&amp;
NOT(ISPICKVAL($User.OW_user_type__c,&quot;Integration&quot;))</errorConditionFormula>
    <errorMessage>Client profile validations outstanding. Please complete these before editing fields visible in the customer&#39;s profile.</errorMessage>
</ValidationRule>
