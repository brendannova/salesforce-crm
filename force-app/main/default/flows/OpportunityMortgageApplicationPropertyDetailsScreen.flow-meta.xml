<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <apiVersion>57.0</apiVersion>
    <assignments>
        <name>AssignApplicationDetails</name>
        <label>Assign Application Details</label>
        <locationX>182</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.AmortizationTerm</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoanDurationInMonths</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.InterestRate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>InterestRate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.Margin__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Margin</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.OW_date_mortgage_application_submitted__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>DateMortgageApplicationSubmitted</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.OW_deposit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Deposit</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.OW_first_time_purchase__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FirstTimePurchase</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.OW_fixed_rate_expires__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ProductExpires</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.OW_fixed_rate_term__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ProductTerm</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.OW_lender__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lender.recordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.OW_lender_fees__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LenderFees</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.OW_monthly_repayment_amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>MonthlyRepaymentAmount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.OW_mortgage_amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>MortgageAmount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.OW_mortgage_type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>MortgageType</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.OW_property_use__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PropertyUse</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.OW_repayment_terms__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RepaymentTerms</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.RateType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RateType</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetMortgageApplication.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Applying for mortgage</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UpdateApplication</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignIDs</name>
        <label>Assign IDs</label>
        <locationX>182</locationX>
        <locationY>1082</locationY>
        <assignmentItems>
            <assignToReference>applicationId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetMortgageApplication.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DateOfOfferVar</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>DateOfOffer</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DateOfCompletion</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetMortgageApplication.OW_date_of_completion__c</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <choices>
        <name>ApplyingforDIP</name>
        <choiceText>&lt;span style=&quot;font-size: 13px;&quot;&gt;Applying for DIP&lt;/span&gt;</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Applying for DIP</stringValue>
        </value>
    </choices>
    <choices>
        <name>FastTracked</name>
        <choiceText>&lt;span style=&quot;font-size: 13px;&quot;&gt;Fast Track&lt;/span&gt;</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Fast Track</stringValue>
        </value>
    </choices>
    <choices>
        <name>No</name>
        <choiceText>No</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>No</stringValue>
        </value>
    </choices>
    <choices>
        <name>Yes</name>
        <choiceText>Yes</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Yes</stringValue>
        </value>
    </choices>
    <decisions>
        <name>PropertyFound</name>
        <label>Property found?</label>
        <locationX>182</locationX>
        <locationY>782</locationY>
        <defaultConnector>
            <targetReference>CreateProperty</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not found</defaultConnectorLabel>
        <rules>
            <name>Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetPropertyRecord.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateProperty</targetReference>
            </connector>
            <label>Found</label>
        </rules>
    </decisions>
    <description>Displays, and allows user to edit, details of Mortgage Application &amp; associated property.
Used in Opportunity | Mortgage | Process Controller flow.</description>
    <dynamicChoiceSets>
        <name>MortgageTypeValues</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>OW_mortgage_type__c</picklistField>
        <picklistObject>ResidentialLoanApplication</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>PropertyUseValues</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>OW_property_use__c</picklistField>
        <picklistObject>ResidentialLoanApplication</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>RateTypeValues</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>RateType__c</picklistField>
        <picklistObject>ResidentialLoanApplication</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>RepaymentTermsValues</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>OW_repayment_terms__c</picklistField>
        <picklistObject>ResidentialLoanApplication</picklistObject>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <formulas>
        <name>OpportunityAmount</name>
        <dataType>Currency</dataType>
        <expression>{!MortgageAmount}*0.003</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>PropertyCountryFormula</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!GetPropertyRecord.PropertyCountry}), &quot;United Kingdom&quot;, {!GetPropertyRecord.PropertyCountry})</expression>
    </formulas>
    <interviewLabel>Opportunity | Mortgage | Application &amp; Property Details Screen {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Opportunity | Mortgage | Application &amp; Property Details Screen</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>CreateProperty</name>
        <label>Create property</label>
        <locationX>314</locationX>
        <locationY>890</locationY>
        <connector>
            <targetReference>AssignIDs</targetReference>
        </connector>
        <inputAssignments>
            <field>ExpMonthlyRentalIncome</field>
            <value>
                <elementReference>ExpectedMonthlyRentalIncome</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LoanApplicationId</field>
            <value>
                <elementReference>GetMortgageApplication.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>PropertyName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PropertyCity</field>
            <value>
                <elementReference>City</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PropertyCountry</field>
            <value>
                <elementReference>Country</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PropertyPostalCode</field>
            <value>
                <elementReference>ZipPostalCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PropertyState</field>
            <value>
                <elementReference>State</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PropertyStreet</field>
            <value>
                <elementReference>Street</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PropertyValue</field>
            <value>
                <elementReference>PropertyValue</elementReference>
            </value>
        </inputAssignments>
        <object>LoanApplicationProperty</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>GetMortgageApplication</name>
        <label>Get Mortgage Application</label>
        <locationX>182</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetPropertyRecord</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetOpportunity.OW_mortgage__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ResidentialLoanApplication</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetOpportunity</name>
        <label>Get opportunity</label>
        <locationX>182</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetMortgageApplication</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetPropertyRecord</name>
        <label>Get Property Record</label>
        <locationX>182</locationX>
        <locationY>350</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>ApplicationPropertyDetails</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>LoanApplicationId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetMortgageApplication.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoanApplicationProperty</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>UpdateApplication</name>
        <label>Update Application</label>
        <locationX>182</locationX>
        <locationY>674</locationY>
        <connector>
            <targetReference>PropertyFound</targetReference>
        </connector>
        <inputReference>GetMortgageApplication</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateProperty</name>
        <label>Update Property</label>
        <locationX>50</locationX>
        <locationY>890</locationY>
        <connector>
            <targetReference>AssignIDs</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetPropertyRecord.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>ExpMonthlyRentalIncome</field>
            <value>
                <elementReference>ExpectedMonthlyRentalIncome</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>PropertyName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PropertyCity</field>
            <value>
                <elementReference>City</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PropertyCountry</field>
            <value>
                <elementReference>Country</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PropertyPostalCode</field>
            <value>
                <elementReference>ZipPostalCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PropertyState</field>
            <value>
                <elementReference>State</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PropertyStreet</field>
            <value>
                <elementReference>Street</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PropertyValue</field>
            <value>
                <elementReference>PropertyValue</elementReference>
            </value>
        </inputAssignments>
        <object>LoanApplicationProperty</object>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <screens>
        <name>ApplicationPropertyDetails</name>
        <label>Application &amp; Property Details</label>
        <locationX>182</locationX>
        <locationY>458</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>AssignApplicationDetails</targetReference>
        </connector>
        <fields>
            <name>DateMortgageApplicationSubmitted</name>
            <dataType>Date</dataType>
            <defaultValue>
                <elementReference>GetOpportunity.OW_mortgage__r.OW_date_mortgage_application_submitted__c</elementReference>
            </defaultValue>
            <fieldText>Date mortgage application submitted</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;Date mortgage application submitted cannot be in the future.&lt;/span&gt;&lt;/p&gt;</errorMessage>
                <formulaExpression>{!DateMortgageApplicationSubmitted}&lt;= TODAY()</formulaExpression>
            </validationRule>
        </fields>
        <fields>
            <name>DateOfOffer</name>
            <dataType>Date</dataType>
            <defaultValue>
                <elementReference>GetMortgageApplication.OW_date_of_offer__c</elementReference>
            </defaultValue>
            <fieldText>Date of offer</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>StageName</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Complete application</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>PurchaseInformation</name>
            <fieldText>Purchase Information</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>PurchaseInformation_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Deposit</name>
                    <dataType>Currency</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.OW_deposit__c</elementReference>
                    </defaultValue>
                    <fieldText>Deposit</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>2</scale>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>MortgageType</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Purchase</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetMortgageApplication.OW_solicitor__c</objectFieldReference>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>PurchaseInformation_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>FirstTimePurchase</name>
                    <dataType>Boolean</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.OW_first_time_purchase__c</elementReference>
                    </defaultValue>
                    <fieldText>First time purchase</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <fields>
            <name>MortgageInformation</name>
            <fieldText>Mortgage Information</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>MortgageInformation_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Lender</name>
                    <extensionName>flowruntime:lookup</extensionName>
                    <fieldType>ComponentInstance</fieldType>
                    <inputParameters>
                        <name>objectApiName</name>
                        <value>
                            <stringValue>Provider_Database__c</stringValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>fieldApiName</name>
                        <value>
                            <stringValue>Public_Provider_Name__c</stringValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>label</name>
                        <value>
                            <stringValue>Lender</stringValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>required</name>
                        <value>
                            <booleanValue>true</booleanValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>recordId</name>
                        <value>
                            <elementReference>GetMortgageApplication.OW_lender__c</elementReference>
                        </value>
                    </inputParameters>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <storeOutputAutomatically>true</storeOutputAutomatically>
                </fields>
                <fields>
                    <name>PropertyUse</name>
                    <choiceReferences>PropertyUseValues</choiceReferences>
                    <dataType>String</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.OW_property_use__c</elementReference>
                    </defaultValue>
                    <fieldText>Property use</fieldText>
                    <fieldType>DropdownBox</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>ProductTerm</name>
                    <dataType>Number</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.OW_fixed_rate_term__c</elementReference>
                    </defaultValue>
                    <fieldText>Product Term (Years)</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>0</scale>
                    <validationRule>
                        <errorMessage>&lt;p&gt;Product term must be less than 100.&lt;/p&gt;</errorMessage>
                        <formulaExpression>{!ProductTerm}&lt;100</formulaExpression>
                    </validationRule>
                </fields>
                <fields>
                    <name>RepaymentTerms</name>
                    <choiceReferences>RepaymentTermsValues</choiceReferences>
                    <dataType>String</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.OW_repayment_terms__c</elementReference>
                    </defaultValue>
                    <fieldText>Repayment terms</fieldText>
                    <fieldType>DropdownBox</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>LoanDurationInMonths</name>
                    <dataType>Number</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.AmortizationTerm</elementReference>
                    </defaultValue>
                    <fieldText>Loan Duration in Months</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>0</scale>
                </fields>
                <fields>
                    <name>LenderFees</name>
                    <dataType>Currency</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.OW_lender_fees__c</elementReference>
                    </defaultValue>
                    <fieldText>Lender Fees</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>2</scale>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>MortgageInformation_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>MortgageType</name>
                    <choiceReferences>MortgageTypeValues</choiceReferences>
                    <dataType>String</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.OW_mortgage_type__c</elementReference>
                    </defaultValue>
                    <fieldText>Mortgage Type</fieldText>
                    <fieldType>DropdownBox</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>MortgageAmount</name>
                    <dataType>Currency</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.OW_mortgage_amount__c</elementReference>
                    </defaultValue>
                    <fieldText>Mortgage Amount</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>2</scale>
                </fields>
                <fields>
                    <name>MonthlyRepaymentAmount</name>
                    <dataType>Currency</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.OW_monthly_repayment_amount__c</elementReference>
                    </defaultValue>
                    <fieldText>Monthly Repayment Amount</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>2</scale>
                </fields>
                <fields>
                    <name>InterestRate</name>
                    <dataType>Number</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.InterestRate</elementReference>
                    </defaultValue>
                    <fieldText>Interest Rate</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>3</scale>
                </fields>
                <fields>
                    <name>RateType</name>
                    <choiceReferences>RateTypeValues</choiceReferences>
                    <dataType>String</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.RateType__c</elementReference>
                    </defaultValue>
                    <fieldText>Rate Type</fieldText>
                    <fieldType>DropdownBox</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>Margin</name>
                    <dataType>Number</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.Margin__c</elementReference>
                    </defaultValue>
                    <fieldText>Margin</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>2</scale>
                    <validationRule>
                        <errorMessage>&lt;p&gt;Margin must be greater than zero for Tracker rates, and less than zero for Discount rates&lt;/p&gt;</errorMessage>
                        <formulaExpression>OR(
{!Margin}&gt;0 &amp;&amp; {!RateType} = &quot;Tracker&quot;,
{!Margin}&lt;0 &amp;&amp; {!RateType} = &quot;Discount&quot;)</formulaExpression>
                    </validationRule>
                    <visibilityRule>
                        <conditionLogic>or</conditionLogic>
                        <conditions>
                            <leftValueReference>RateType</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Tracker</stringValue>
                            </rightValue>
                        </conditions>
                        <conditions>
                            <leftValueReference>RateType</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Discount</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <fields>
                    <name>ProductExpires</name>
                    <dataType>Date</dataType>
                    <defaultValue>
                        <elementReference>GetMortgageApplication.OW_fixed_rate_expires__c</elementReference>
                    </defaultValue>
                    <fieldText>Product Expires</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <fields>
            <name>PropertyInformation</name>
            <fieldText>Property Information</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>PropertyInformation_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>PropertyName</name>
                    <dataType>String</dataType>
                    <defaultValue>
                        <elementReference>GetPropertyRecord.Name</elementReference>
                    </defaultValue>
                    <fieldText>Property Name</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>AddressTitle</name>
                    <fieldText>&lt;p&gt;&lt;strong&gt;&lt;u&gt;Address&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Street</name>
                    <dataType>String</dataType>
                    <defaultValue>
                        <elementReference>GetPropertyRecord.PropertyStreet</elementReference>
                    </defaultValue>
                    <fieldText>Street</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>City</name>
                    <dataType>String</dataType>
                    <defaultValue>
                        <elementReference>GetPropertyRecord.PropertyCity</elementReference>
                    </defaultValue>
                    <fieldText>City</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>State</name>
                    <dataType>String</dataType>
                    <defaultValue>
                        <elementReference>GetPropertyRecord.PropertyState</elementReference>
                    </defaultValue>
                    <fieldText>State/Province</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>ZipPostalCode</name>
                    <dataType>String</dataType>
                    <defaultValue>
                        <elementReference>GetPropertyRecord.PropertyPostalCode</elementReference>
                    </defaultValue>
                    <fieldText>Zip/Postal Code</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <fields>
                    <name>Country</name>
                    <dataType>String</dataType>
                    <defaultValue>
                        <elementReference>PropertyCountryFormula</elementReference>
                    </defaultValue>
                    <fieldText>Country</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>PropertyInformation_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>PropertyValue</name>
                    <dataType>Currency</dataType>
                    <defaultValue>
                        <elementReference>GetPropertyRecord.PropertyValue</elementReference>
                    </defaultValue>
                    <fieldText>Property Value</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <scale>2</scale>
                </fields>
                <fields>
                    <name>ExpectedMonthlyRentalIncome</name>
                    <dataType>Currency</dataType>
                    <defaultValue>
                        <elementReference>GetPropertyRecord.ExpMonthlyRentalIncome</elementReference>
                    </defaultValue>
                    <fieldText>Expected Monthly Rental Income</fieldText>
                    <fieldType>InputField</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <scale>2</scale>
                    <validationRule>
                        <errorMessage>&lt;p&gt;As property use = &quot;Rent&quot;, please enter a value for expected monthly rental income.&lt;/p&gt;</errorMessage>
                        <formulaExpression>ISPICKVAL({!GetMortgageApplication.OW_property_use__c}, &quot;Rent&quot;) &amp;&amp;
ISBLANK({!ExpectedMonthlyRentalIncome})</formulaExpression>
                    </validationRule>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>GetMortgageApplication.OW_property_use__c</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <stringValue>Rent</stringValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <nextOrFinishButtonLabel>Submit</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>56</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>GetOpportunity</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>applicationId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>DateOfCompletion</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>DateOfOfferVar</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>DateSubmitted</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>LenderId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>orchestrationInstanceId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>propertyId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>SolicitorId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>StageName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
