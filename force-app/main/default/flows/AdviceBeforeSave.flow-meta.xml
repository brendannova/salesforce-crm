<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>57.0</apiVersion>
    <assignments>
        <name>Check_Is_Closed</name>
        <label>Check Is Closed</label>
        <locationX>974</locationX>
        <locationY>1787</locationY>
        <assignmentItems>
            <assignToReference>$Record.IsClosed__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Status_completed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_4_eye_review_complete_date</name>
        <label>Set 4 eye review complete date</label>
        <locationX>1370</locationX>
        <locationY>2387</locationY>
        <assignmentItems>
            <assignToReference>$Record.X4_eye_review_complete_date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_create_deck_complete_date</name>
        <label>Set create deck complete date</label>
        <locationX>842</locationX>
        <locationY>2387</locationY>
        <assignmentItems>
            <assignToReference>$Record.Create_deck_complete_date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_data_analysis_status_to_in_progress</name>
        <label>Set data analysis status to in progress</label>
        <locationX>1238</locationX>
        <locationY>395</locationY>
        <assignmentItems>
            <assignToReference>$Record.DataAnalysisStatus__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>In progress</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Advice_type</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_data_analysis_status_to_not_required</name>
        <label>Set data analysis status to not required</label>
        <locationX>710</locationX>
        <locationY>395</locationY>
        <assignmentItems>
            <assignToReference>$Record.DataAnalysisStatus__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Not required</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Advice_type</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_data_analysis_status_to_required</name>
        <label>Set data analysis status to required</label>
        <locationX>974</locationX>
        <locationY>395</locationY>
        <assignmentItems>
            <assignToReference>$Record.DataAnalysisStatus__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Not started</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Advice_type</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_data_gathering_complete_date</name>
        <label>Set data gathering complete date</label>
        <locationX>578</locationX>
        <locationY>2087</locationY>
        <assignmentItems>
            <assignToReference>$Record.Data_Gathering_Complete_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Suitability_stage_change</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_deck_complete_complete_date</name>
        <label>Set deck complete complete date</label>
        <locationX>1370</locationX>
        <locationY>2087</locationY>
        <assignmentItems>
            <assignToReference>$Record.Deck_Complete_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Suitability_stage_change</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_fulfilment_start_date</name>
        <label>Set fulfilment start date</label>
        <locationX>974</locationX>
        <locationY>1187</locationY>
        <assignmentItems>
            <assignToReference>$Record.OW_fulfilment_start_date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Status_changed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_meeting_held_date</name>
        <label>Set meeting held date</label>
        <locationX>1634</locationX>
        <locationY>2087</locationY>
        <assignmentItems>
            <assignToReference>$Record.Meeting_Held_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Suitability_stage_change</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_narrative_approval_complete_date</name>
        <label>Set narrative approval complete date</label>
        <locationX>314</locationX>
        <locationY>2387</locationY>
        <assignmentItems>
            <assignToReference>$Record.Narrative_approval_complete_date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_planner_suitability_narrative_complete_date</name>
        <label>Set planner suitability narrative complete date</label>
        <locationX>50</locationX>
        <locationY>2387</locationY>
        <assignmentItems>
            <assignToReference>$Record.Planner_Suitability_Narrative_complete_d__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_prepare_fulfilment_complete_date</name>
        <label>Set prepare fulfilment complete date</label>
        <locationX>1898</locationX>
        <locationY>2387</locationY>
        <assignmentItems>
            <assignToReference>$Record.Prepare_fulfilment_complete_date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_product_research_complete_date</name>
        <label>Set product research complete date</label>
        <locationX>578</locationX>
        <locationY>2387</locationY>
        <assignmentItems>
            <assignToReference>$Record.Product_research_complete_date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_ready_for_4_eye_complete_date</name>
        <label>Set ready for 4 eye complete date</label>
        <locationX>1106</locationX>
        <locationY>2387</locationY>
        <assignmentItems>
            <assignToReference>$Record.Ready_for_4_eye_complete_date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_ready_for_suitability_complete_date</name>
        <label>Set ready for suitability complete date</label>
        <locationX>842</locationX>
        <locationY>2087</locationY>
        <assignmentItems>
            <assignToReference>$Record.Ready_for_Suitability_Complete_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Suitability_stage_change</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_setup_complete_date</name>
        <label>Set setup complete date</label>
        <locationX>314</locationX>
        <locationY>2087</locationY>
        <assignmentItems>
            <assignToReference>$Record.Setup_Complete_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Suitability_stage_change</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_status_change_date</name>
        <label>Set status change date</label>
        <locationX>974</locationX>
        <locationY>1487</locationY>
        <assignmentItems>
            <assignToReference>$Record.Advice_Status_change_date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Advice_closed_or_open</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_status_to_data_analysis</name>
        <label>Set status to data analysis</label>
        <locationX>402</locationX>
        <locationY>803</locationY>
        <assignmentItems>
            <assignToReference>$Record.Advice_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Data analysis</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Moved_to_in_fulfilment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_status_to_prepare_advice</name>
        <label>Set status to prepare advice</label>
        <locationX>666</locationX>
        <locationY>803</locationY>
        <assignmentItems>
            <assignToReference>$Record.Advice_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Prepare advice</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Moved_to_in_fulfilment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_status_to_prepare_advice_protection</name>
        <label>Set status to prepare advice</label>
        <locationX>1106</locationX>
        <locationY>803</locationY>
        <assignmentItems>
            <assignToReference>$Record.Advice_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Prepare advice</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Moved_to_in_fulfilment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_suitability_approval_complete_date</name>
        <label>Set suitability approval complete date</label>
        <locationX>1634</locationX>
        <locationY>2387</locationY>
        <assignmentItems>
            <assignToReference>$Record.Suitability_approval_complete_date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_suitability_in_progress_complete_date</name>
        <label>Set suitability in progress complete date</label>
        <locationX>1106</locationX>
        <locationY>2087</locationY>
        <assignmentItems>
            <assignToReference>$Record.Suitability_In_Progress_Complete_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Suitability_stage_change</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Uncheck_Is_Closed</name>
        <label>Uncheck Is Closed</label>
        <locationX>1238</locationX>
        <locationY>1787</locationY>
        <assignmentItems>
            <assignToReference>$Record.IsClosed__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Status_completed</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Advice_closed_or_open</name>
        <label>Advice closed or open</label>
        <locationX>1106</locationX>
        <locationY>1679</locationY>
        <defaultConnector>
            <targetReference>Uncheck_Is_Closed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Open</defaultConnectorLabel>
        <rules>
            <name>Closed</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Suitability Declined</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Cancelled</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Is_Closed</targetReference>
            </connector>
            <label>Closed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Advice_type</name>
        <label>Advice type</label>
        <locationX>1106</locationX>
        <locationY>587</locationY>
        <defaultConnector>
            <targetReference>Moved_to_in_fulfilment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>Annual_review</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.AdviceType__r.DeveloperName__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ANNUAL_REVIEW_ACCUMULATION</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AdviceType__r.DeveloperName__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ANNUAL_REVIEW_RETIREMENT</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Push_status</targetReference>
            </connector>
            <label>Annual review</label>
        </rules>
        <rules>
            <name>Protection</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.AdviceType__r.DeveloperName__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>PROTECTION</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Data_gathering</targetReference>
            </connector>
            <label>Protection</label>
        </rules>
    </decisions>
    <decisions>
        <name>Data_gathering</name>
        <label>Data gathering</label>
        <locationX>1238</locationX>
        <locationY>695</locationY>
        <defaultConnector>
            <targetReference>Moved_to_in_fulfilment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not completed</defaultConnectorLabel>
        <rules>
            <name>Completed_protection_data_gathering</name>
            <conditionLogic>1 AND (2 OR 3) AND (4 OR 5)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Data gathering</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ProfileUpdateStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ProfileUpdateStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Not required</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.DataGatheringStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.DataGatheringStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Not required</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_status_to_prepare_advice_protection</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Completed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Data_gathering_status_set_to</name>
        <label>Data gathering status set to</label>
        <locationX>1106</locationX>
        <locationY>287</locationY>
        <defaultConnector>
            <targetReference>Advice_type</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No change</defaultConnectorLabel>
        <rules>
            <name>Not_required</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.DataGatheringStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Not required</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_data_analysis_status_to_not_required</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Not required</label>
        </rules>
        <rules>
            <name>In_progress</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.DataGatheringStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>In progress</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_data_analysis_status_to_required</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>In progress</label>
        </rules>
        <rules>
            <name>Complete</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.DataGatheringStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Complete</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_data_analysis_status_to_in_progress</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Complete</label>
        </rules>
    </decisions>
    <decisions>
        <name>Moved_to_in_fulfilment</name>
        <label>Moved to in fulfilment</label>
        <locationX>1106</locationX>
        <locationY>1079</locationY>
        <defaultConnector>
            <targetReference>Status_changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>In fulfilment</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.OW_fulfilment_start_date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_fulfilment_start_date</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Push_status</name>
        <label>Push status</label>
        <locationX>666</locationX>
        <locationY>695</locationY>
        <defaultConnector>
            <targetReference>Moved_to_in_fulfilment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No status change</defaultConnectorLabel>
        <rules>
            <name>Data_gathering_Data_analysis</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Data gathering</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ProfileUpdateStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.DataGatheringStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Complete</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_status_to_data_analysis</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Data gathering -&gt; Data analysis</label>
        </rules>
        <rules>
            <name>Move_to_prepare_advice</name>
            <conditionLogic>1 AND (2 OR 3) AND (4 OR 5) AND (6 OR 7) AND (8 OR 9)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ProfileUpdateStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.DataGatheringStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.DataGatheringStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Not required</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.DataAnalysisStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.DataAnalysisStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Not required</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RtqStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RtqStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>No update required</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RiskCallStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RiskCallStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Skipped</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_status_to_prepare_advice</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Move to prepare advice</label>
        </rules>
    </decisions>
    <decisions>
        <name>Status_changed</name>
        <label>Status changed</label>
        <locationX>1106</locationX>
        <locationY>1379</locationY>
        <defaultConnector>
            <targetReference>Advice_closed_or_open</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not changed</defaultConnectorLabel>
        <rules>
            <name>Changed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_status_change_date</targetReference>
            </connector>
            <label>Changed</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checks if a status has completed by comparing the current and previous status.</description>
        <name>Status_completed</name>
        <label>Status completed?</label>
        <locationX>1106</locationX>
        <locationY>1979</locationY>
        <defaultConnector>
            <targetReference>Suitability_stage_change</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Setup_complete</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Setup</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Data gathering</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Setup_Complete_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_setup_complete_date</targetReference>
            </connector>
            <label>Setup</label>
        </rules>
        <rules>
            <name>Data_gathering_complete</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Data gathering</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Risk Call</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Data_Gathering_Complete_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_data_gathering_complete_date</targetReference>
            </connector>
            <label>Data gathering</label>
        </rules>
        <rules>
            <name>Ready_for_suitability</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Ready for suitability</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Suitability in progress</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Ready_for_Suitability_Complete_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_ready_for_suitability_complete_date</targetReference>
            </connector>
            <label>Ready for suitability</label>
        </rules>
        <rules>
            <name>Suitability_in_progress</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Suitability in progress</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Deck complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Suitability_In_Progress_Complete_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_suitability_in_progress_complete_date</targetReference>
            </connector>
            <label>Suitability in progress</label>
        </rules>
        <rules>
            <name>Deck_complete</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Deck complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Await decision</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Deck_Complete_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_deck_complete_complete_date</targetReference>
            </connector>
            <label>Deck complete</label>
        </rules>
        <rules>
            <name>Await_decision</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Await decision</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Advice_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>In fulfilment</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Meeting_Held_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_meeting_held_date</targetReference>
            </connector>
            <label>Await decision</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checks if the suitability stage has completed by comparing the current and previous status.</description>
        <name>Suitability_stage_change</name>
        <label>Suitability stage change</label>
        <locationX>1106</locationX>
        <locationY>2279</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Planner_suitability_narrative</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Planner Suitability Narrative</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Narrative Approval</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Planner_Suitability_Narrative_complete_d__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_planner_suitability_narrative_complete_date</targetReference>
            </connector>
            <label>Planner suitability narrative</label>
        </rules>
        <rules>
            <name>Narrative_approval</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Narrative Approval</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Product Research</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Narrative_approval_complete_date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_narrative_approval_complete_date</targetReference>
            </connector>
            <label>Narrative approval</label>
        </rules>
        <rules>
            <name>Product_research</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Product Research</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Create Deck</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Product_research_complete_date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_product_research_complete_date</targetReference>
            </connector>
            <label>Product research</label>
        </rules>
        <rules>
            <name>Create_deck</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Create Deck</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Ready for 4 eye</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Create_deck_complete_date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_create_deck_complete_date</targetReference>
            </connector>
            <label>Create deck</label>
        </rules>
        <rules>
            <name>Ready_for_4_eye</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Ready for 4 eye</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>4 eye review</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Ready_for_4_eye_complete_date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_ready_for_4_eye_complete_date</targetReference>
            </connector>
            <label>Ready for 4 eye</label>
        </rules>
        <rules>
            <name>X4_eye_review</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>4 eye review</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Suitability Approval</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.X4_eye_review_complete_date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_4_eye_review_complete_date</targetReference>
            </connector>
            <label>4 eye review</label>
        </rules>
        <rules>
            <name>Suitability_approval</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Suitability Approval</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Prepare Fulfilment</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Suitability_approval_complete_date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_suitability_approval_complete_date</targetReference>
            </connector>
            <label>Suitability approval</label>
        </rules>
        <rules>
            <name>Prepare_fulfilment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Prepare Fulfilment</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Suitability_stage__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Complete</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Prepare_fulfilment_complete_date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_prepare_fulfilment_complete_date</targetReference>
            </connector>
            <label>Prepare fulfilment</label>
        </rules>
    </decisions>
    <description>Makes fast field updates on the advice record, such as setting key dates and boolean fields like is closed, advice presented etc.</description>
    <environments>Default</environments>
    <formulas>
        <description>The date on which the status will move to amber, calculated as the due date less the warning offset in business days.</description>
        <name>status_amber_date</name>
        <dataType>Date</dataType>
        <expression>CASE( MOD({!status_due_date} - DATE(1900, 1, 7), 7),
0, ({!status_due_date}) - ({!$Record.OW_warning_offset__c} + FLOOR(({!$Record.OW_warning_offset__c}-1)/5)*2),
1, ({!status_due_date}) - ({!$Record.OW_warning_offset__c} + FLOOR(({!$Record.OW_warning_offset__c})/5)*2),
2, ({!status_due_date}) - ({!$Record.OW_warning_offset__c} + FLOOR(({!$Record.OW_warning_offset__c}+1)/5)*2),
3, ({!status_due_date}) - ({!$Record.OW_warning_offset__c} + FLOOR(({!$Record.OW_warning_offset__c}+2)/5)*2),
4, ({!status_due_date}) - ({!$Record.OW_warning_offset__c} + FLOOR(({!$Record.OW_warning_offset__c}+3)/5)*2),
5, ({!status_due_date}) - ({!$Record.OW_warning_offset__c} + CEILING(({!$Record.OW_warning_offset__c})/5)*2),
6, ({!status_due_date}) - (IF({!$Record.OW_warning_offset__c}&gt;0,1,0) + {!$Record.OW_warning_offset__c} + CEILING(({!$Record.OW_warning_offset__c})/5)*2), null)</expression>
    </formulas>
    <formulas>
        <description>The due date for the status, calculated as the status start date plus the SLA in business days.</description>
        <name>status_due_date</name>
        <dataType>Date</dataType>
        <expression>CASE( MOD({!status_start_date} - DATE(1900, 1, 7), 7),
0, ({!status_start_date}) + {!$Record.OW_status_sla__c} + FLOOR(({!$Record.OW_status_sla__c}-1)/5)*2,
1, ({!status_start_date}) + {!$Record.OW_status_sla__c} + FLOOR(({!$Record.OW_status_sla__c})/5)*2,
2, ({!status_start_date}) + {!$Record.OW_status_sla__c} + FLOOR(({!$Record.OW_status_sla__c}+1)/5)*2,
3, ({!status_start_date}) + {!$Record.OW_status_sla__c} + FLOOR(({!$Record.OW_status_sla__c}+2)/5)*2,
4, ({!status_start_date}) + {!$Record.OW_status_sla__c} + FLOOR(({!$Record.OW_status_sla__c}+3)/5)*2,
5, ({!status_start_date}) + {!$Record.OW_status_sla__c} + CEILING(({!$Record.OW_status_sla__c})/5)*2,
6, ({!status_start_date}) - IF({!$Record.OW_status_sla__c}&gt;0,1,0) + {!$Record.OW_status_sla__c} + CEILING(({!$Record.OW_status_sla__c})/5)*2, null)</expression>
    </formulas>
    <formulas>
        <description>The start date that should apply when monitoring compliance with the status&#39;s SLA</description>
        <name>status_start_date</name>
        <dataType>Date</dataType>
        <expression>CASE({!$Record.Advice_Status__c},
&quot;Setup&quot;, DATEVALUE({!$Record.CreatedDate}),
&quot;Data gathering&quot;,{!$Record.Setup_Complete_Date__c},
&quot;In fulfilment&quot;, {!$Record.Meeting_Held_Date__c},
null )</expression>
    </formulas>
    <interviewLabel>Advice | Before Save {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Advice | Before Save</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <start>
        <locationX>980</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Data_gathering_status_set_to</targetReference>
        </connector>
        <object>Advice__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordBeforeSave</triggerType>
    </start>
    <status>Active</status>
</Flow>
