<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Create_tasks</name>
        <label>Create tasks</label>
        <locationX>534</locationX>
        <locationY>6302</locationY>
        <actionName>FlowUtilityTaskCreateList</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Was_task_creation_a_success</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>taskRequests</name>
            <value>
                <elementReference>taskRequestsToCreate</elementReference>
            </value>
        </inputParameters>
        <nameSegment>FlowUtilityTaskCreateList</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>De_duplicate_household_list</name>
        <label>De-duplicate household list</label>
        <locationX>534</locationX>
        <locationY>4388</locationY>
        <actionName>StringListDeduplicate</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Assign_values</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>inputString</name>
            <value>
                <elementReference>householdsGettingAnUpdateIds</elementReference>
            </value>
        </inputParameters>
        <nameSegment>StringListDeduplicate</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>60.0</apiVersion>
    <assignments>
        <name>Add_advice_id_to_list</name>
        <label>Add advice id to list</label>
        <locationX>358</locationX>
        <locationY>890</locationY>
        <assignmentItems>
            <assignToReference>newAdviceIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Collect_new_advice_ids.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Collect_new_advice_ids</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_advice_to_collection</name>
        <label>Add advice to collection</label>
        <locationX>514</locationX>
        <locationY>3812</locationY>
        <assignmentItems>
            <assignToReference>adviceToUpdate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>singleAdviceToUpdate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_through_advice_that_requires_updating</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_current_specialist_to_used_list</name>
        <label>Add current specialist to used list</label>
        <locationX>886</locationX>
        <locationY>4820</locationY>
        <assignmentItems>
            <assignToReference>usedSpecialistIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>currentSpecialistId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Remaining_specialists</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_id_to_collection</name>
        <label>Add ID to collection</label>
        <locationX>622</locationX>
        <locationY>4196</locationY>
        <assignmentItems>
            <assignToReference>householdsGettingAnUpdateIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_household_ids.Advice_Household__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_household_ids</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_new_to_loop</name>
        <label>Add new to loop</label>
        <locationX>358</locationX>
        <locationY>1622</locationY>
        <assignmentItems>
            <assignToReference>adviceRequiringDmlUpdate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Work_out_which_new_advice_is_relevant</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>adviceRequiringUpdateEmail</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Work_out_which_new_advice_is_relevant</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Work_out_which_new_advice_is_relevant</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_specialist_ID_to_collection</name>
        <label>Add ID to collection</label>
        <locationX>622</locationX>
        <locationY>2930</locationY>
        <assignmentItems>
            <assignToReference>specialistIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_specialist_IDs.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_specialist_IDs</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_standard_to_loop</name>
        <label>Add ongoing to advice collection</label>
        <locationX>534</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>adviceRequiringUpdateEmail</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_advice_which_is_receiving_updates</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_protection_advice_type</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_task_to_collection</name>
        <label>Add task to collection</label>
        <locationX>1018</locationX>
        <locationY>5786</locationY>
        <assignmentItems>
            <assignToReference>taskRequestsToCreate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>taskRequestToCreate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_count</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_count</name>
        <label>Add to count</label>
        <locationX>1018</locationX>
        <locationY>5894</locationY>
        <assignmentItems>
            <assignToReference>count</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Households</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_user_to_collection</name>
        <label>Add user to collection</label>
        <locationX>622</locationX>
        <locationY>2414</locationY>
        <assignmentItems>
            <assignToReference>users</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>userLoop</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_user_licences</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_advice_values</name>
        <label>Assign advice values</label>
        <locationX>514</locationX>
        <locationY>3704</locationY>
        <assignmentItems>
            <assignToReference>singleAdviceToUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_through_advice_that_requires_updating.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>singleAdviceToUpdate.FulfilmentUpdateStatus__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Receiving updates</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_advice_to_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_counts</name>
        <label>Assign counts</label>
        <locationX>534</locationX>
        <locationY>6086</locationY>
        <assignmentItems>
            <assignToReference>existingAdviceCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Get_advice_which_is_receiving_updates</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newAdviceCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>adviceRequiringDmlUpdate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Summary</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_error_message</name>
        <label>Assign error message</label>
        <locationX>314</locationX>
        <locationY>6734</locationY>
        <assignmentItems>
            <assignToReference>errorMessage</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Error_sub_flow</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_first_current_specialist</name>
        <label>Assign first current specialist</label>
        <locationX>622</locationX>
        <locationY>3230</locationY>
        <assignmentItems>
            <assignToReference>currentSpecialistId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Specialist_IDs</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Is_there_any_advice_requiring_an_update</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_fulfilment_count</name>
        <label>Assign fulfilment count</label>
        <locationX>490</locationX>
        <locationY>1406</locationY>
        <assignmentItems>
            <assignToReference>fulfilmentCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Get_relevant_fulfilment_for_this_advice</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Are_there_any_relevant_pieces_of_fulfilment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_new_specialist</name>
        <label>Assign new specialist</label>
        <locationX>1150</locationX>
        <locationY>5144</locationY>
        <assignmentItems>
            <assignToReference>currentSpecialistId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Remaining_specialists</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Set_count_to_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_task_request_values</name>
        <label>Assign task request values</label>
        <locationX>1018</locationX>
        <locationY>5678</locationY>
        <assignmentItems>
            <assignToReference>taskRequestToCreate.householdId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Households</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>taskRequestToCreate.taskType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>fulfilment_update</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>taskRequestToCreate.chosenUser</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>currentSpecialistId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>taskRequestToCreate.whatId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Households</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_task_to_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_values</name>
        <label>Assign values</label>
        <locationX>534</locationX>
        <locationY>4496</locationY>
        <assignmentItems>
            <assignToReference>numSpecs</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>userSelect.selectedRows</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>numHouseholds</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>De_duplicate_household_list.outputString</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>count</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Households</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_user</name>
        <label>Define user</label>
        <locationX>622</locationX>
        <locationY>2306</locationY>
        <assignmentItems>
            <assignToReference>userLoop.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_user_licences.User__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>userLoop.FirstName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_user_licences.User__r.FirstName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>userLoop.LastName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_user_licences.User__r.LastName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>userLoop.Username</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_user_licences.User__r.Username</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_user_to_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_count_to_0</name>
        <label>Set count to 0</label>
        <locationX>886</locationX>
        <locationY>5486</locationY>
        <assignmentItems>
            <assignToReference>count</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_task_request_values</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <name>Get_relevant_fulfilment_for_this_advice</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Get relevant fulfilment for this advice</label>
        <locationX>490</locationX>
        <locationY>1298</locationY>
        <assignNextValueToReference>currentItem_Get_relevant_fulfilment_for_this_advice</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>Get_fulfilment_for_new_advice</collectionReference>
        <conditionLogic>formula_evaluates_to_true</conditionLogic>
        <connector>
            <targetReference>Assign_fulfilment_count</targetReference>
        </connector>
        <formula>{!currentItem_Get_relevant_fulfilment_for_this_advice.Advice__c} = {!Work_out_which_new_advice_is_relevant.Id}
&amp;&amp;
!{!currentItem_Get_relevant_fulfilment_for_this_advice.FulfilmentType__r.ExcludeFromUpdate__c}</formula>
    </collectionProcessors>
    <collectionProcessors>
        <name>Sort_users_alphabetically</name>
        <elementSubtype>SortCollectionProcessor</elementSubtype>
        <label>Sort users alphabetically</label>
        <locationX>534</locationX>
        <locationY>2606</locationY>
        <collectionProcessorType>SortCollectionProcessor</collectionProcessorType>
        <collectionReference>users</collectionReference>
        <connector>
            <targetReference>User_selection</targetReference>
        </connector>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>false</doesPutEmptyStringAndNullFirst>
            <sortField>FirstName</sortField>
            <sortOrder>Asc</sortOrder>
        </sortOptions>
    </collectionProcessors>
    <constants>
        <name>LICENCE_DEVELOPER_NAME_FULFILMENT_UPDATE_SEND</name>
        <dataType>String</dataType>
        <value>
            <stringValue>FULFILMENT_UPDATE_SEND</stringValue>
        </value>
    </constants>
    <decisions>
        <name>Are_there_any_relevant_pieces_of_fulfilment</name>
        <label>Are there any relevant pieces of fulfilment?</label>
        <locationX>490</locationX>
        <locationY>1514</locationY>
        <defaultConnector>
            <targetReference>Work_out_which_new_advice_is_relevant</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesFulfilment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>fulfilmentCount</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_new_to_loop</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>This check is in place to ensure that Salesforce doesn&#39;t add in a bug while processing lists.</description>
        <name>Has_this_specialist_been_used_yet</name>
        <label>Has this specialist been used yet?</label>
        <locationX>1062</locationX>
        <locationY>5036</locationY>
        <defaultConnector>
            <targetReference>Assign_new_specialist</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesSpecialistUsed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>usedSpecialistIds</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Remaining_specialists</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Remaining_specialists</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>If yes, we then remove the current specialist from the specialist list, and set the new current specialist to be the first person left in the list</description>
        <name>Have_we_reached_the_households_per_specialist_limit</name>
        <label>Have we reached the households per specialist limit?</label>
        <locationX>1018</locationX>
        <locationY>4712</locationY>
        <defaultConnector>
            <targetReference>Assign_task_request_values</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesLimitReached</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>count</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>householdsPerSpecs</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_current_specialist_to_used_list</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_there_any_advice_requiring_an_update</name>
        <label>Is there any advice requiring an update?</label>
        <locationX>534</locationX>
        <locationY>3488</locationY>
        <defaultConnector>
            <targetReference>Get_household_ids</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesAdviceRequiresUpdate</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>adviceRequiringDmlUpdate</leftValueReference>
                <operator>IsEmpty</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_through_advice_that_requires_updating</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_there_any_advice_to_update</name>
        <label>Is there any advice to update?</label>
        <locationX>314</locationX>
        <locationY>6518</locationY>
        <defaultConnector>
            <targetReference>SuccessScreen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>adviceToUpdate</leftValueReference>
                <operator>IsEmpty</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_advice</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_there_any_newly_ready_advice</name>
        <label>Is there any newly ready advice?</label>
        <locationX>534</locationX>
        <locationY>674</locationY>
        <defaultConnector>
            <targetReference>Get_licence</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesNewlyReadyAdvice</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_advice_newly_ready</leftValueReference>
                <operator>IsEmpty</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Collect_new_advice_ids</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_task_creation_a_success</name>
        <label>Was task creation a success?</label>
        <locationX>534</locationX>
        <locationY>6410</locationY>
        <defaultConnector>
            <targetReference>Rollback</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesSuccess</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Create_tasks.isSuccess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_there_any_advice_to_update</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>For coordinators to easily assign emails out to available specialists</description>
    <environments>Default</environments>
    <formulas>
        <name>errorText</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE(
  SUBSTITUTE(
    SUBSTITUTE({!Create_tasks.errorMessages}, &quot;[&quot;, NULL),
    &quot;]&quot;, NULL
  ),
  &quot;,&quot;, BR()
)</expression>
    </formulas>
    <formulas>
        <name>householdsPerSpecs</name>
        <dataType>Number</dataType>
        <expression>CEILING({!numHouseholds} / {!numSpecs})</expression>
        <scale>0</scale>
    </formulas>
    <interviewLabel>Fulfilment | assign out emails {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Fulfilment | assign out emails</label>
    <loops>
        <name>Collect_new_advice_ids</name>
        <label>Collect new advice ids</label>
        <locationX>270</locationX>
        <locationY>782</locationY>
        <collectionReference>Get_advice_newly_ready</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Add_advice_id_to_list</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_fulfilment_for_new_advice</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Get_household_ids</name>
        <label>Get household IDs</label>
        <locationX>534</locationX>
        <locationY>4088</locationY>
        <collectionReference>adviceRequiringUpdateEmail</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Add_id_to_collection</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>De_duplicate_household_list</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Get_specialist_IDs</name>
        <label>Get specialist IDs</label>
        <locationX>534</locationX>
        <locationY>2822</locationY>
        <collectionReference>userSelect.selectedRows</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Add_specialist_ID_to_collection</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Specialist_IDs</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Households</name>
        <label>Households</label>
        <locationX>534</locationX>
        <locationY>4604</locationY>
        <collectionReference>De_duplicate_household_list.outputString</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Have_we_reached_the_households_per_specialist_limit</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Assign_counts</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Assigning a new fulfilment update status for advice which will now be receiving an update (where it wasn&#39;t previously)</description>
        <name>Loop_through_advice_that_requires_updating</name>
        <label>Loop through advice that requires updating</label>
        <locationX>426</locationX>
        <locationY>3596</locationY>
        <collectionReference>adviceRequiringDmlUpdate</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_advice_values</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_household_ids</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_user_licences</name>
        <label>Loop user licences</label>
        <locationX>534</locationX>
        <locationY>2198</locationY>
        <collectionReference>userLicences</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Define_user</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Sort_users_alphabetically</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Remaining_specialists</name>
        <label>Remaining specialists</label>
        <locationX>886</locationX>
        <locationY>4928</locationY>
        <collectionReference>specialistIds</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Has_this_specialist_been_used_yet</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Set_count_to_0</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Specialist_IDs</name>
        <label>Specialist IDs</label>
        <locationX>534</locationX>
        <locationY>3122</locationY>
        <collectionReference>specialistIds</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_first_current_specialist</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Is_there_any_advice_requiring_an_update</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Work_out_which_new_advice_is_relevant</name>
        <label>Work out which new advice is relevant</label>
        <locationX>270</locationX>
        <locationY>1190</locationY>
        <collectionReference>Get_advice_newly_ready</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Get_relevant_fulfilment_for_this_advice</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_licence</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordLookups>
        <description>Gets advice which is in fulfilment but hasn&#39;t got an update status yet</description>
        <name>Get_advice_newly_ready</name>
        <label>Get advice newly ready</label>
        <locationX>534</locationX>
        <locationY>566</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_there_any_newly_ready_advice</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Update_advice</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Advice_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>In fulfilment</stringValue>
            </value>
        </filters>
        <filters>
            <field>FulfilmentUpdateStatus__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>AdviceType__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>protectionAdviceTypeId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Advice__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Advice_Status__c</queriedFields>
        <queriedFields>FulfilmentUpdateStatus__c</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>AdviceLink__c</queriedFields>
        <queriedFields>Advice_Household__c</queriedFields>
        <sortField>Advice_Household__c</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Gets advice with a fulfilment update status of receiving updates or not receiving updates</description>
        <name>Get_advice_which_is_receiving_updates</name>
        <label>Get advice which is receiving updates</label>
        <locationX>534</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Add_standard_to_loop</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_error_message</targetReference>
        </faultConnector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>FulfilmentUpdateStatus__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Receiving updates</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Advice__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Advice_Status__c</queriedFields>
        <queriedFields>FulfilmentUpdateStatus__c</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>AdviceLink__c</queriedFields>
        <queriedFields>ExcludedUpdateReason__c</queriedFields>
        <queriedFields>ExcludedUpdateNotes__c</queriedFields>
        <queriedFields>Advice_Household__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_fulfilment_for_new_advice</name>
        <label>Get fulfilment for new advice</label>
        <locationX>270</locationX>
        <locationY>1082</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Work_out_which_new_advice_is_relevant</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Update_advice</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Advice__c</field>
            <operator>In</operator>
            <value>
                <elementReference>newAdviceIds</elementReference>
            </value>
        </filters>
        <filters>
            <field>ExcludeFromUpdate__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Status__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>On hold</stringValue>
            </value>
        </filters>
        <filters>
            <field>Status__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Postponed</stringValue>
            </value>
        </filters>
        <filters>
            <field>Status__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Awaiting pre-requisites</stringValue>
            </value>
        </filters>
        <filters>
            <field>Status__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Cancelled</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Fulfilment__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Status__c</queriedFields>
        <queriedFields>Advice__c</queriedFields>
        <queriedFields>FulfilmentType__c</queriedFields>
        <queriedFields>ExcludeFromUpdate__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_licence</name>
        <label>Get licence</label>
        <locationX>534</locationX>
        <locationY>1982</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_user_licences</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Update_advice</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>LICENCE_DEVELOPER_NAME_FULFILMENT_UPDATE_SEND</elementReference>
            </value>
        </filters>
        <object>Licence__c</object>
        <outputAssignments>
            <assignToReference>licenceId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_protection_advice_type</name>
        <label>Get protection advice type</label>
        <locationX>534</locationX>
        <locationY>458</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_advice_newly_ready</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Update_advice</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>PROTECTION</stringValue>
            </value>
        </filters>
        <filters>
            <field>Active__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>AdviceType__c</object>
        <outputAssignments>
            <assignToReference>protectionAdviceTypeId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_user_licences</name>
        <label>Get user licences</label>
        <locationX>534</locationX>
        <locationY>2090</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_user_licences</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Update_advice</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Licence__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>licenceId</elementReference>
            </value>
        </filters>
        <filters>
            <field>IsActive__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>UserLicence__c</object>
        <outputReference>userLicences</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>User__c</queriedFields>
    </recordLookups>
    <recordRollbacks>
        <name>Rollback</name>
        <label>Rollback</label>
        <locationX>754</locationX>
        <locationY>6518</locationY>
        <connector>
            <targetReference>Display_errors</targetReference>
        </connector>
    </recordRollbacks>
    <recordUpdates>
        <name>Update_advice</name>
        <label>Update advice</label>
        <locationX>50</locationX>
        <locationY>6626</locationY>
        <connector>
            <targetReference>SuccessScreen</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Assign_error_message</targetReference>
        </faultConnector>
        <inputReference>adviceToUpdate</inputReference>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <screens>
        <name>Display_errors</name>
        <label>Display errors</label>
        <locationX>754</locationX>
        <locationY>6626</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>errorTextDisplay</name>
            <fieldText>&lt;p&gt;There&#39;s been errors here:&lt;/p&gt;&lt;p&gt;{!errorText}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Intro</name>
        <label>Intro</label>
        <locationX>534</locationX>
        <locationY>134</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Get_advice_which_is_receiving_updates</targetReference>
        </connector>
        <fields>
            <name>introText</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; color: rgb(55, 53, 47);&quot;&gt;To assign out fulfilment updates, click Next. &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; color: rgb(55, 53, 47);&quot;&gt;Any household with one or pieces of advice with a fulfilment update status of &#39;Receiving updates&#39; will receive a task.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; color: rgb(55, 53, 47);&quot;&gt;Youâ€™ll be able to choose the team members who will send the updates this week. &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Don&#39;t do this if you don&#39;t want them to get tasks yet!&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>SuccessScreen</name>
        <label>Success</label>
        <locationX>314</locationX>
        <locationY>7166</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>SuccessToast</name>
            <extensionName>c:displayToastFlow</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>message</name>
                <value>
                    <stringValue>Just to provide an update for you - I have fulfilled your request!</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>title</name>
                <value>
                    <stringValue>Success!</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>variant</name>
                <value>
                    <stringValue>success</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>false</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Summary</name>
        <label>Summary</label>
        <locationX>534</locationX>
        <locationY>6194</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <backButtonLabel>Go back and make changes</backButtonLabel>
        <connector>
            <targetReference>Create_tasks</targetReference>
        </connector>
        <fields>
            <name>doneText</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(55, 53, 47); font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; font-size: 14px; background-color: rgb(255, 255, 255);&quot;&gt;Click Assign Updates to continue. &lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>casesExplain</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;Each specialist will receive a maximum of {!householdsPerSpecs} cases each.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;There will be {!numHouseholds} tasks in total.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;There are {!newAdviceCount} new advice cases receiving an update.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;There are {!existingAdviceCount} advice cases which have received an update previously.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Assign updates</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>User_selection</name>
        <label>User selection</label>
        <locationX>534</locationX>
        <locationY>2714</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Get_specialist_IDs</targetReference>
        </connector>
        <fields>
            <name>specialistExplain</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; color: rgb(55, 53, 47);&quot;&gt;Choose who updates should be assigned to this week. &lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>userSelect</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>User</typeValue>
            </dataTypeMappings>
            <extensionName>flowruntime:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Specialists</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectionMode</name>
                <value>
                    <stringValue>MULTI_SELECT</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>minRowSelection</name>
                <value>
                    <numberValue>1.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>shouldDisplayLabel</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>users</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columns</name>
                <value>
                    <stringValue>[{&quot;apiName&quot;:&quot;FirstName&quot;,&quot;guid&quot;:&quot;column-d6f0&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;First Name&quot;,&quot;type&quot;:&quot;text&quot;},{&quot;apiName&quot;:&quot;LastName&quot;,&quot;guid&quot;:&quot;column-e2c0&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:1,&quot;label&quot;:&quot;Last Name&quot;,&quot;type&quot;:&quot;text&quot;},{&quot;apiName&quot;:&quot;Username&quot;,&quot;guid&quot;:&quot;column-f984&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:2,&quot;label&quot;:&quot;Username&quot;,&quot;type&quot;:&quot;text&quot;}]</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>isShowSearchBar</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>408</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Intro</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>Error_sub_flow</name>
        <label>Error sub flow</label>
        <locationX>314</locationX>
        <locationY>6842</locationY>
        <flowName>ErrorHandleScreen</flowName>
        <inputAssignments>
            <name>closeFlowAfterToast</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>errorMessage</name>
            <value>
                <elementReference>errorMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>showToast</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>toastMessage</name>
            <value>
                <elementReference>errorMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>toastMode</name>
            <value>
                <stringValue>error</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>toastTitle</name>
            <value>
                <stringValue>Error</stringValue>
            </value>
        </inputAssignments>
    </subflows>
    <variables>
        <name>adviceRequiringDmlUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>adviceRequiringUpdateEmail</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>adviceToUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>count</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>currentItem_Get_relevant_fulfilment_for_this_advice</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Fulfilment__c</objectType>
    </variables>
    <variables>
        <name>currentSpecialistId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>errorMessage</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>existingAdviceCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>fulfilmentCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>householdsGettingAnUpdateIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>licenceId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>newAdviceCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>newAdviceIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>numHouseholds</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>numSpecs</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>protectionAdviceTypeId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>singleAdviceToUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>specialistIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>successFlag</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>taskRequestsToCreate</name>
        <apexClass>TaskEngineRequest</apexClass>
        <dataType>Apex</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>taskRequestToCreate</name>
        <apexClass>TaskEngineRequest</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>usedSpecialistIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>userLicences</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>UserLicence__c</objectType>
    </variables>
    <variables>
        <name>userLoop</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>User</objectType>
    </variables>
    <variables>
        <name>users</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>User</objectType>
    </variables>
</Flow>
