<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>De_duplicate_household_list</name>
        <label>De-duplicate household list</label>
        <locationX>182</locationX>
        <locationY>4778</locationY>
        <actionName>StringListDeduplicate</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Assign_values</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>inputString</name>
            <value>
                <elementReference>householdsGettingAnUpdateIds</elementReference>
            </value>
        </inputParameters>
        <nameSegment>StringListDeduplicate</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>60.0</apiVersion>
    <assignments>
        <name>Add_advice_id_to_list</name>
        <label>Add advice id to list</label>
        <locationX>270</locationX>
        <locationY>1814</locationY>
        <assignmentItems>
            <assignToReference>newAdviceIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Collect_new_advice_ids.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Collect_new_advice_ids</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_advice_to_collection</name>
        <label>Add advice to collection</label>
        <locationX>270</locationX>
        <locationY>4286</locationY>
        <assignmentItems>
            <assignToReference>adviceToUpdate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>singleAdviceToUpdate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_through_advice</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_advice_to_relevant_new_advice_collection</name>
        <label>Add advice to relevant new advice collection</label>
        <locationX>270</locationX>
        <locationY>2546</locationY>
        <assignmentItems>
            <assignToReference>relevantNewAdvice</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Work_out_which_new_advice_is_relevant</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Work_out_which_new_advice_is_relevant</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_id_to_collection</name>
        <label>Add id to collection</label>
        <locationX>270</locationX>
        <locationY>4586</locationY>
        <assignmentItems>
            <assignToReference>householdsGettingAnUpdateIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_household_ids.Advice_Household__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_household_ids</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_new_to_loop</name>
        <label>Add new to loop</label>
        <locationX>50</locationX>
        <locationY>3146</locationY>
        <assignmentItems>
            <assignToReference>adviceToLoop</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>newAdviceSelect.selectedRows</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_fulfilment_update_permission_set</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_standard_to_loop</name>
        <label>Add ongoing to advice collection</label>
        <locationX>50</locationX>
        <locationY>1406</locationY>
        <assignmentItems>
            <assignToReference>adviceToLoop</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>goimgAdviceReview.selectedRows</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_advice_newly_ready</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_task_to_collection</name>
        <label>Add task to collection</label>
        <locationX>1062</locationX>
        <locationY>5534</locationY>
        <assignmentItems>
            <assignToReference>tasksToCreate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>taskToCreate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_count</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_count</name>
        <label>Add to count</label>
        <locationX>1062</locationX>
        <locationY>5642</locationY>
        <assignmentItems>
            <assignToReference>count</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>processedHouseholdIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_through_households</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_through_households</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_unblocked_advice_to_collection</name>
        <label>Add unblocked advice to collection</label>
        <locationX>50</locationX>
        <locationY>890</locationY>
        <assignmentItems>
            <assignToReference>adviceToLoop</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>blockedSelect.selectedRows</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Being_sent_review</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_user_id_to_collection</name>
        <label>Add user id to collection</label>
        <locationX>270</locationX>
        <locationY>3662</locationY>
        <assignmentItems>
            <assignToReference>userIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_user_ids_from_permission_set_assignments.AssigneeId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_user_ids_from_permission_set_assignments</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_advice_values</name>
        <label>Assign advice values</label>
        <locationX>270</locationX>
        <locationY>4178</locationY>
        <assignmentItems>
            <assignToReference>singleAdviceToUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_through_advice.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>singleAdviceToUpdate.FulfilmentUpdateStatus__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Receiving updates</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>singleAdviceToUpdate.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_through_advice.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>singleAdviceToUpdate.AdviceLink__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_through_advice.AdviceLink__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_advice_to_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_count</name>
        <label>Assign count</label>
        <locationX>622</locationX>
        <locationY>6002</locationY>
        <assignmentItems>
            <assignToReference>count</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_through_specialists</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_fulfilment_count</name>
        <label>Assign fulfilment count</label>
        <locationX>402</locationX>
        <locationY>2330</locationY>
        <assignmentItems>
            <assignToReference>fulfilmentCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Get_relevant_fulfilment_for_this_advice</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Are_there_any_relevant_pieces_of_fulfilment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_new_count</name>
        <label>Assign new count</label>
        <locationX>182</locationX>
        <locationY>2930</locationY>
        <assignmentItems>
            <assignToReference>newCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>newAdviceSelect.selectedRows</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Are_there_any_new_advice</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_ongoing_count</name>
        <label>Assign ongoing count</label>
        <locationX>182</locationX>
        <locationY>1190</locationY>
        <assignmentItems>
            <assignToReference>ongoingCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>goimgAdviceReview.selectedRows</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Are_there_any_ongoing_advice</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_task_request_values</name>
        <label>Assign task request values</label>
        <locationX>1062</locationX>
        <locationY>5426</locationY>
        <assignmentItems>
            <assignToReference>taskToCreate.householdId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_through_households</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>taskToCreate.taskType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>fulfilment_update</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>taskToCreate.whatId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_through_households</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>taskToCreate.chosenUser</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_through_specialists.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_task_to_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_unblocked_count</name>
        <label>Assign unblocked count</label>
        <locationX>182</locationX>
        <locationY>674</locationY>
        <assignmentItems>
            <assignToReference>unblockedCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>blockedSelect.selectedRows</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Are_there_any_unblocked_advice</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_values</name>
        <label>Assign values</label>
        <locationX>182</locationX>
        <locationY>4886</locationY>
        <assignmentItems>
            <assignToReference>numSpecs</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>userSelect.selectedRows</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>numHouseholds</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>De_duplicate_household_list.outputString</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>count</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_through_specialists</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <name>Advice_where_updates_are_blocked</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Advice where updates are blocked</label>
        <locationX>182</locationX>
        <locationY>350</locationY>
        <assignNextValueToReference>currentItem_Advice_where_updates_are_blocked</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>Get_advice</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_Advice_where_updates_are_blocked.FulfilmentUpdateStatus__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>Not receiving updates</stringValue>
            </rightValue>
        </conditions>
        <conditions>
            <leftValueReference>currentItem_Advice_where_updates_are_blocked.Advice_Status__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>In fulfilment</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Advice_where_updates_are_going</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>Advice_where_updates_are_going</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Advice where updates are going</label>
        <locationX>182</locationX>
        <locationY>458</locationY>
        <assignNextValueToReference>currentItem_Advice_where_updates_are_going</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>Get_advice</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_Advice_where_updates_are_going.FulfilmentUpdateStatus__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>Receiving updates</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Blocked_advice_review</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>Get_relevant_fulfilment_for_this_advice</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Get relevant fulfilment for this advice</label>
        <locationX>402</locationX>
        <locationY>2222</locationY>
        <assignNextValueToReference>currentItem_Get_relevant_fulfilment_for_this_advice</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>Get_fulfilment_for_new_advice</collectionReference>
        <conditionLogic>formula_evaluates_to_true</conditionLogic>
        <connector>
            <targetReference>Assign_fulfilment_count</targetReference>
        </connector>
        <formula>NOT(ISPICKVAL({!currentItem_Get_relevant_fulfilment_for_this_advice.Status__c} , &quot;On hold&quot; ))
&amp;&amp;
NOT(ISPICKVAL({!currentItem_Get_relevant_fulfilment_for_this_advice.Status__c} , &quot;Postponed&quot; ))
&amp;&amp;
NOT(ISPICKVAL({!currentItem_Get_relevant_fulfilment_for_this_advice.Status__c} , &quot;Cancelled&quot; ))
&amp;&amp;
NOT(ISPICKVAL({!currentItem_Get_relevant_fulfilment_for_this_advice.Status__c} , &quot;Awaiting pre-requisites&quot; ))
&amp;&amp;
NOT(ISPICKVAL({!currentItem_Get_relevant_fulfilment_for_this_advice.Status__c} , &quot;Submit fulfilment&quot; ))
&amp;&amp;
{!currentItem_Get_relevant_fulfilment_for_this_advice.Advice__c} = {!Work_out_which_new_advice_is_relevant.Id}
&amp;&amp;
!{!currentItem_Get_relevant_fulfilment_for_this_advice.FulfilmentType__r.ExcludeFromUpdate__c}
&amp;&amp;
!{!currentItem_Get_relevant_fulfilment_for_this_advice.ExcludeFromUpdate__c}</formula>
    </collectionProcessors>
    <decisions>
        <name>Are_there_any_new_advice</name>
        <label>Are there any new advice?</label>
        <locationX>182</locationX>
        <locationY>3038</locationY>
        <defaultConnector>
            <targetReference>Get_fulfilment_update_permission_set</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesNew</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>newCount</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_new_to_loop</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Are_there_any_ongoing_advice</name>
        <label>Are there any ongoing advice?</label>
        <locationX>182</locationX>
        <locationY>1298</locationY>
        <defaultConnector>
            <targetReference>Get_advice_newly_ready</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesOngoing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ongoingCount</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_standard_to_loop</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Are_there_any_relevant_pieces_of_fulfilment</name>
        <label>Are there any relevant pieces of fulfilment?</label>
        <locationX>402</locationX>
        <locationY>2438</locationY>
        <defaultConnector>
            <targetReference>Work_out_which_new_advice_is_relevant</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesFulfilment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>fulfilmentCount</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_advice_to_relevant_new_advice_collection</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Are_there_any_unblocked_advice</name>
        <label>Are there any unblocked advice?</label>
        <locationX>182</locationX>
        <locationY>782</locationY>
        <defaultConnector>
            <targetReference>Being_sent_review</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesUnblocked</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>unblockedCount</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_unblocked_advice_to_collection</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Has_this_household_been_assigned_already</name>
        <label>Has this household been assigned already?</label>
        <locationX>842</locationX>
        <locationY>5210</locationY>
        <defaultConnector>
            <targetReference>Has_this_specialist_got_enough_cases</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesAssigned</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>processedHouseholdIds</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>Loop_through_households</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_through_households</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Has_this_specialist_got_enough_cases</name>
        <label>Has this specialist got enough cases?</label>
        <locationX>974</locationX>
        <locationY>5318</locationY>
        <defaultConnector>
            <targetReference>Assign_task_request_values</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>count</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>householdPerSpecs</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_through_households</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_task_creation_a_success</name>
        <label>Was task creation a success?</label>
        <locationX>182</locationX>
        <locationY>6410</locationY>
        <defaultConnector>
            <targetReference>ErrorScreen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesSuccess</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Create_tasks.Success</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_advice</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>For coordinators to easily assign emails out to available specialists</description>
    <environments>Default</environments>
    <formulas>
        <name>householdPerSpecs</name>
        <dataType>Number</dataType>
        <expression>CEILING({!numHouseholds} / {!numSpecs})</expression>
        <scale>0</scale>
    </formulas>
    <interviewLabel>Fulfilment | assign out emails {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Fulfilment | assign out emails</label>
    <loops>
        <name>Collect_new_advice_ids</name>
        <label>Collect new advice ids</label>
        <locationX>182</locationX>
        <locationY>1706</locationY>
        <collectionReference>Get_advice_newly_ready</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Add_advice_id_to_list</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_fulfilment_for_new_advice</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Get_household_ids</name>
        <label>Get household ids</label>
        <locationX>182</locationX>
        <locationY>4478</locationY>
        <collectionReference>adviceToLoop</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Add_id_to_collection</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>De_duplicate_household_list</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Get_user_ids_from_permission_set_assignments</name>
        <label>Get user ids from permission set assignments</label>
        <locationX>182</locationX>
        <locationY>3554</locationY>
        <collectionReference>Get_permission_set_assignments</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Add_user_id_to_collection</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_specialists</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_through_advice</name>
        <label>Loop through advice</label>
        <locationX>182</locationX>
        <locationY>4070</locationY>
        <collectionReference>adviceToLoop</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_advice_values</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_household_ids</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_through_households</name>
        <label>Loop through households</label>
        <locationX>622</locationX>
        <locationY>5102</locationY>
        <collectionReference>De_duplicate_household_list.outputString</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Has_this_household_been_assigned_already</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Assign_count</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_through_specialists</name>
        <label>Loop through specialists</label>
        <locationX>182</locationX>
        <locationY>4994</locationY>
        <collectionReference>userSelect.selectedRows</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Loop_through_households</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Summary</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Work_out_which_new_advice_is_relevant</name>
        <label>Work out which new advice is relevant</label>
        <locationX>182</locationX>
        <locationY>2114</locationY>
        <collectionReference>Get_advice_newly_ready</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Get_relevant_fulfilment_for_this_advice</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>New_advice_review</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordLookups>
        <description>Gets advice with a fulfilment update status of receiving updates or not receiving updates</description>
        <name>Get_advice</name>
        <label>Get advice which has a fulfilment update status set</label>
        <locationX>182</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Advice_where_updates_are_blocked</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>FulfilmentUpdateStatus__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Receiving updates</stringValue>
            </value>
        </filters>
        <filters>
            <field>FulfilmentUpdateStatus__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Not receiving updates</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Advice__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Advice_Status__c</queriedFields>
        <queriedFields>FulfilmentUpdateStatus__c</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>AdviceLink__c</queriedFields>
        <queriedFields>ExcludedUpdateReason__c</queriedFields>
        <queriedFields>ExcludedUpdateNotes__c</queriedFields>
        <queriedFields>Advice_Household__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Gets advice which is in fulfilment but hasn&#39;t got an update status yet</description>
        <name>Get_advice_newly_ready</name>
        <label>Get advice newly ready</label>
        <locationX>182</locationX>
        <locationY>1598</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Collect_new_advice_ids</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Advice_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>In fulfilment</stringValue>
            </value>
        </filters>
        <filters>
            <field>FulfilmentUpdateStatus__c</field>
            <operator>EqualTo</operator>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Advice__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Advice_Status__c</queriedFields>
        <queriedFields>FulfilmentUpdateStatus__c</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>AdviceLink__c</queriedFields>
        <queriedFields>Advice_Household__c</queriedFields>
        <sortField>Advice_Household__c</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_fulfilment_for_new_advice</name>
        <label>Get fulfilment for new advice</label>
        <locationX>182</locationX>
        <locationY>2006</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Work_out_which_new_advice_is_relevant</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Advice__c</field>
            <operator>In</operator>
            <value>
                <elementReference>newAdviceIds</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Fulfilment__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Status__c</queriedFields>
        <queriedFields>Advice__c</queriedFields>
        <queriedFields>FulfilmentType__c</queriedFields>
        <queriedFields>ExcludeFromUpdate__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_fulfilment_update_permission_set</name>
        <label>Get fulfilment update permission set</label>
        <locationX>182</locationX>
        <locationY>3338</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_permission_set_assignments</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>FulfilmentSendFulfilmentUpdates</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PermissionSet</object>
        <queriedFields>Id</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_permission_set_assignments</name>
        <label>Get permission set assignments</label>
        <locationX>182</locationX>
        <locationY>3446</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_user_ids_from_permission_set_assignments</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>PermissionSetId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_fulfilment_update_permission_set.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>PermissionSetAssignment</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>AssigneeId</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_specialists</name>
        <label>Get specialists</label>
        <locationX>182</locationX>
        <locationY>3854</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>User_selection</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>In</operator>
            <value>
                <elementReference>userIds</elementReference>
            </value>
        </filters>
        <filters>
            <field>IsActive</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>User</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_advice</name>
        <label>Update advice</label>
        <locationX>50</locationX>
        <locationY>6518</locationY>
        <connector>
            <targetReference>SuccessScreen</targetReference>
        </connector>
        <inputReference>adviceToUpdate</inputReference>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <screens>
        <name>Being_sent_review</name>
        <label>Being sent review</label>
        <locationX>182</locationX>
        <locationY>1082</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Assign_ongoing_count</targetReference>
        </connector>
        <fields>
            <name>ongoingExplain</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; color: rgb(55, 53, 47);&quot;&gt;Choose any advice that should receive an update. &lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>goimgAdviceReview</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>Advice__c</typeValue>
            </dataTypeMappings>
            <extensionName>flowruntime:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Advice receiving updates</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectionMode</name>
                <value>
                    <stringValue>MULTI_SELECT</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>minRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>Advice_where_updates_are_going</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columns</name>
                <value>
                    <stringValue>[{&quot;apiName&quot;:&quot;AdviceLink__c&quot;,&quot;guid&quot;:&quot;column-745a&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Advice&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;Advice link&quot;,&quot;type&quot;:&quot;customRichText&quot;}]</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>shouldDisplayLabel</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Blocked_advice_review</name>
        <label>Blocked advice review</label>
        <locationX>182</locationX>
        <locationY>566</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Assign_unblocked_count</targetReference>
        </connector>
        <fields>
            <name>blockedExplain</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; color: rgb(55, 53, 47);&quot;&gt;Choose any advice that should now receive an update.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>blockedSelect</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>Advice__c</typeValue>
            </dataTypeMappings>
            <extensionName>flowruntime:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Advice not receiving updates</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectionMode</name>
                <value>
                    <stringValue>MULTI_SELECT</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>minRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>Advice_where_updates_are_blocked</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columns</name>
                <value>
                    <stringValue>[{&quot;apiName&quot;:&quot;AdviceLink__c&quot;,&quot;guid&quot;:&quot;column-6b53&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Advice&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;Advice link&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;ExcludedUpdateReason__c&quot;,&quot;guid&quot;:&quot;column-e353&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Reason for current exclusion&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:1,&quot;label&quot;:&quot;Excluded update reason&quot;,&quot;type&quot;:&quot;text&quot;},{&quot;apiName&quot;:&quot;ExcludedUpdateNotes__c&quot;,&quot;guid&quot;:&quot;column-0d31&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Notes&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:2,&quot;label&quot;:&quot;Excluded update notes&quot;,&quot;type&quot;:&quot;text&quot;}]</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>shouldDisplayLabel</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>ErrorScreen</name>
        <label>Error</label>
        <locationX>314</locationX>
        <locationY>6518</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>ErrorToast</name>
            <extensionName>c:displayToastFlow</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>title</name>
                <value>
                    <stringValue>Oh no!</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>variant</name>
                <value>
                    <stringValue>error</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>message</name>
                <value>
                    <stringValue>Something has gone wrong here.  Please let the salesforce team know, quoting this error message:    {!Create_tasks.faultMessage}    No tasks have been created and no advice has been updated.</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>false</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Intro</name>
        <label>Intro</label>
        <locationX>182</locationX>
        <locationY>134</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Get_advice</targetReference>
        </connector>
        <fields>
            <name>introText</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(55, 53, 47); font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; font-size: 14px; background-color: rgb(255, 255, 255);&quot;&gt;To assign out fulfilment updates, click Next. &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(55, 53, 47); font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; font-size: 14px; background-color: rgb(255, 255, 255);&quot;&gt;You’ll be able to &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(55, 53, 47); font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; font-size: 14px; background-color: rgb(255, 255, 255);&quot;&gt;- take advice off the not receiving updates list&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(55, 53, 47); font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; font-size: 14px; background-color: rgb(255, 255, 255);&quot;&gt;- add new advice in fulfilment to the receiving updates list&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(55, 53, 47); font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; font-size: 14px; background-color: rgb(255, 255, 255);&quot;&gt;- choose advice on the receiving updates lists to assign out&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(55, 53, 47); font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; font-size: 14px; background-color: rgb(255, 255, 255);&quot;&gt;- choose the team members who will send the updates this week &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Don&#39;t do this if you don&#39;t want them to get tasks yet!&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>New_advice_review</name>
        <label>New advice review</label>
        <locationX>182</locationX>
        <locationY>2822</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Assign_new_count</targetReference>
        </connector>
        <fields>
            <name>newExplain</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; color: rgb(55, 53, 47);&quot;&gt;Choose any advice that should start receiving updates. &lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>newAdviceSelect</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>Advice__c</typeValue>
            </dataTypeMappings>
            <extensionName>flowruntime:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>New advice in fulfilment</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectionMode</name>
                <value>
                    <stringValue>MULTI_SELECT</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>minRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>relevantNewAdvice</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectedRows</name>
                <value>
                    <elementReference>Get_advice_newly_ready</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columns</name>
                <value>
                    <stringValue>[{&quot;apiName&quot;:&quot;AdviceLink__c&quot;,&quot;guid&quot;:&quot;column-aa6a&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Advice&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;Advice link&quot;,&quot;type&quot;:&quot;customRichText&quot;}]</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>shouldDisplayLabel</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>SuccessScreen</name>
        <label>Success</label>
        <locationX>50</locationX>
        <locationY>6626</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>SuccessToast</name>
            <extensionName>c:displayToastFlow</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>message</name>
                <value>
                    <stringValue>Just to provide an update for you - I have fulfilled your request!</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>title</name>
                <value>
                    <stringValue>Success!</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>variant</name>
                <value>
                    <stringValue>success</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>false</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Summary</name>
        <label>Summary</label>
        <locationX>182</locationX>
        <locationY>6194</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <backButtonLabel>Go back and make changes</backButtonLabel>
        <connector>
            <targetReference>Create_tasks</targetReference>
        </connector>
        <fields>
            <name>doneText</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; color: rgb(55, 53, 47);&quot;&gt;The following advice will receive an update this week. Click Assign Updates to continue. &lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>casesExplain</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;Each specialist will receive a maximum of {!householdPerSpecs} cases each.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>display</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>Advice__c</typeValue>
            </dataTypeMappings>
            <extensionName>flowruntime:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Data Table</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectionMode</name>
                <value>
                    <stringValue>NO_SELECTION</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>minRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>adviceToUpdate</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>maxRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columns</name>
                <value>
                    <stringValue>[{&quot;apiName&quot;:&quot;AdviceLink__c&quot;,&quot;guid&quot;:&quot;column-1284&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Advice&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;Advice link&quot;,&quot;type&quot;:&quot;customRichText&quot;}]</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <nextOrFinishButtonLabel>Assign updates</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>User_selection</name>
        <label>User selection</label>
        <locationX>182</locationX>
        <locationY>3962</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Loop_through_advice</targetReference>
        </connector>
        <fields>
            <name>specialistExplain</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; font-family: ui-sans-serif, -apple-system, &amp;quot;system-ui&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Helvetica, &amp;quot;Apple Color Emoji&amp;quot;, Arial, sans-serif, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; color: rgb(55, 53, 47);&quot;&gt;Choose who updates should be assigned to this week. &lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>userSelect</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>User</typeValue>
            </dataTypeMappings>
            <extensionName>flowruntime:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Specialists</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectionMode</name>
                <value>
                    <stringValue>MULTI_SELECT</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>minRowSelection</name>
                <value>
                    <numberValue>1.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>shouldDisplayLabel</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>Get_specialists</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columns</name>
                <value>
                    <stringValue>[{&quot;apiName&quot;:&quot;Name&quot;,&quot;guid&quot;:&quot;column-d6f0&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;Full Name&quot;,&quot;type&quot;:&quot;text&quot;}]</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>56</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Intro</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>Create_tasks</name>
        <label>Create tasks</label>
        <locationX>182</locationX>
        <locationY>6302</locationY>
        <connector>
            <targetReference>Was_task_creation_a_success</targetReference>
        </connector>
        <flowName>TaskCreateFromRequests</flowName>
        <inputAssignments>
            <name>taskRequests</name>
            <value>
                <elementReference>tasksToCreate</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <variables>
        <name>adviceToLoop</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>adviceToUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>count</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>currentItem_Advice_where_updates_are_blocked</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>currentItem_Advice_where_updates_are_going</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>currentItem_Get_relevant_fulfilment_for_this_advice</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Fulfilment__c</objectType>
    </variables>
    <variables>
        <name>currentItemFromSourceCollection</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>fulfilmentCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>householdsGettingAnUpdateIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>newAdviceIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>newCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>numHouseholds</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>numSpecs</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>ongoingCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>processedHouseholdIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>relevantNewAdvice</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>singleAdviceToUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>tasksToCreate</name>
        <apexClass>TaskRequest</apexClass>
        <dataType>Apex</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>taskToCreate</name>
        <apexClass>TaskRequest</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>unblockedCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>userIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
