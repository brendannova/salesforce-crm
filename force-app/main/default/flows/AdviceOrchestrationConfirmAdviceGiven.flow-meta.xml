<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <apiVersion>62.0</apiVersion>
    <assignments>
        <name>Advice_method_undefined_error</name>
        <label>Advice method undefined error</label>
        <locationX>754</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>errorMessage</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Advice method undefined when confirming it has happened. Please raise with the product team. </stringValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Define_1st_advice_value</name>
        <label>Define 1st advice value</label>
        <locationX>336</locationX>
        <locationY>2198</locationY>
        <assignmentItems>
            <assignToReference>household.DateOfFirstAdvice__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>adviceDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Review_schedule</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_annual_review_schedule</name>
        <label>Define annual review schedule</label>
        <locationX>336</locationX>
        <locationY>2498</locationY>
        <assignmentItems>
            <assignToReference>household.OW_annual_review_month__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>annualReviewMonth</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>household.FinServ__NextReview__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>firstAnnualReviewDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_household</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_household_record</name>
        <label>Define household record</label>
        <locationX>468</locationX>
        <locationY>1982</locationY>
        <assignmentItems>
            <assignToReference>household.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>advice.Advice_Household__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>household.DateOfMostRecentAdvice__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>adviceDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>First_advice_decision</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_advice_date</name>
        <label>Set advice date</label>
        <locationX>468</locationX>
        <locationY>950</locationY>
        <assignmentItems>
            <assignToReference>adviceDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>adviceDateFormula</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Call_advice_recipients_flow</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_advice_expiry</name>
        <label>Set advice expiry</label>
        <locationX>468</locationX>
        <locationY>1574</locationY>
        <assignmentItems>
            <assignToReference>adviceUpdated.AdviceExpiry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>adviceExpiry</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_a_task_needed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_fault_error</name>
        <label>Set fault error</label>
        <locationX>1810</locationX>
        <locationY>2798</locationY>
        <assignmentItems>
            <assignToReference>errorMessage</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_post_sharing_advice_values</name>
        <label>Set post-sharing advice values</label>
        <locationX>468</locationX>
        <locationY>134</locationY>
        <assignmentItems>
            <assignToReference>adviceUpdated.AdvicePresented__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>adviceUpdated.Advice_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Await decision</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Advice_method</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_presented_values_meeting_held</name>
        <label>Set presented values | meeting held</label>
        <locationX>182</locationX>
        <locationY>458</locationY>
        <assignmentItems>
            <assignToReference>adviceUpdated.Suitability_meeting_status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Meeting Held</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>adviceUpdated.Suitability_meeting_location__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Suitability_meeting_location</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>adviceUpdated.MeetingObserved__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>WasTheMeetingObserved</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>adviceDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>adviceDateFormula</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Retirement_call</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_presented_values_non_presented</name>
        <label>Set presented values | non-presented</label>
        <locationX>490</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>adviceUpdated.Suitability_meeting_status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Non-presented</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>adviceUpdated.Suitability_meeting_location__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>N/A</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>adviceUpdated.Suitability_meeting_date_time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>clientEmailedDateTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_advice_date</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>clientHomeChoice</name>
        <choiceText>Client&#39;s Home</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Client&#39;s Home</stringValue>
        </value>
    </choices>
    <choices>
        <name>clientWorkChoice</name>
        <choiceText>Client&#39;s Work</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Client&#39;s Work</stringValue>
        </value>
    </choices>
    <choices>
        <name>NotObserved</name>
        <choiceText>No</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>No</stringValue>
        </value>
    </choices>
    <choices>
        <name>novaOfficeChoice</name>
        <choiceText>Nova office</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Octopus Wealth Office</stringValue>
        </value>
    </choices>
    <choices>
        <name>onlineChoice</name>
        <choiceText>Online</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Online</stringValue>
        </value>
    </choices>
    <choices>
        <name>YesObserved</name>
        <choiceText>Yes</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Yes</stringValue>
        </value>
    </choices>
    <constants>
        <name>NON_PRESENTED_VALUE</name>
        <dataType>String</dataType>
        <value>
            <stringValue>NON_PRESENTED</stringValue>
        </value>
    </constants>
    <constants>
        <name>PRESENTED_VALUE</name>
        <dataType>String</dataType>
        <value>
            <stringValue>PRESENTED</stringValue>
        </value>
    </constants>
    <decisions>
        <name>Advice_method</name>
        <label>Advice method</label>
        <locationX>468</locationX>
        <locationY>242</locationY>
        <defaultConnector>
            <targetReference>Advice_method_undefined_error</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not defined</defaultConnectorLabel>
        <rules>
            <name>Presented_outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>advice.AdviceMethod__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>PRESENTED</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Confirm_meeting_details</targetReference>
            </connector>
            <label>Presented</label>
        </rules>
        <rules>
            <name>Non_presented_outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>advice.AdviceMethod__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>NON_PRESENTED</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_presented_values_non_presented</targetReference>
            </connector>
            <label>Non-presented</label>
        </rules>
    </decisions>
    <decisions>
        <name>Decision_outcome</name>
        <label>Decision outcome</label>
        <locationX>468</locationX>
        <locationY>3122</locationY>
        <defaultConnectorLabel>All still considering</defaultConnectorLabel>
        <rules>
            <name>YesAllDeclined</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Call_advice_recipients_flow.numDeclinedClients</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Call_advice_recipients_flow.numAdvisedClients</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Call_decline_advice_flow</targetReference>
            </connector>
            <label>All recommendations declined</label>
        </rules>
        <rules>
            <name>Some_accepted</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Call_advice_recipients_flow.numAcceptedClients</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Call_mark_decisions_flow</targetReference>
            </connector>
            <label>Some accepted</label>
        </rules>
    </decisions>
    <decisions>
        <name>First_advice_decision</name>
        <label>First advice?</label>
        <locationX>468</locationX>
        <locationY>2090</locationY>
        <defaultConnector>
            <targetReference>Review_schedule</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not first advice</defaultConnectorLabel>
        <rules>
            <name>First_advice_outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>advice.Advice_Household__r.DateOfFirstAdvice__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Define_1st_advice_value</targetReference>
            </connector>
            <label>First advice</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_a_task_needed</name>
        <label>Is a task needed?</label>
        <locationX>468</locationX>
        <locationY>1682</locationY>
        <defaultConnector>
            <targetReference>Define_household_record</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesTask</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Call_advice_recipients_flow.createTaskFlag</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_task</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Presented_Method</name>
        <label>Presented Method</label>
        <locationX>468</locationX>
        <locationY>1166</locationY>
        <defaultConnector>
            <targetReference>Set_advice_expiry</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not defined</defaultConnectorLabel>
        <rules>
            <name>Meeting</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>advice.AdviceMethod__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>PRESENTED</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_send_dropbox_task</targetReference>
            </connector>
            <label>Meeting</label>
        </rules>
    </decisions>
    <decisions>
        <name>Retirement_call</name>
        <label>Retirement call</label>
        <locationX>182</locationX>
        <locationY>566</locationY>
        <defaultConnector>
            <targetReference>Set_advice_date</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not required</defaultConnectorLabel>
        <rules>
            <name>Required</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>advice.RetirementCallStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>PRESENT</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>advice.RetirementCallStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>REQUIRED</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Confirm_retirement_call</targetReference>
            </connector>
            <label>Required</label>
        </rules>
    </decisions>
    <decisions>
        <name>Review_schedule</name>
        <label>Review schedule</label>
        <locationX>468</locationX>
        <locationY>2390</locationY>
        <defaultConnector>
            <targetReference>Update_household</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Already defined</defaultConnectorLabel>
        <rules>
            <name>Review_scheduled_needed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>advice.Advice_Household__r.OW_annual_review_month__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Define_annual_review_schedule</targetReference>
            </connector>
            <label>Review scheduled needed</label>
        </rules>
    </decisions>
    <description>Allows the user to confirm that advice has been given to the customer, presented or non-presented, while capturing associated information.</description>
    <dynamicChoiceSets>
        <name>adviceMethodChoice</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true" />
        <object xsi:nil="true" />
        <picklistField>AdviceMethod__c</picklistField>
        <picklistObject>Advice__c</picklistObject>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <formulas>
        <description>The date value of the suitability meeting date/time.</description>
        <name>adviceDateFormula</name>
        <dataType>Date</dataType>
        <expression>CASE({!advice.AdviceMethod__c},
&quot;PRESENTED&quot;, DATEVALUE({!advice.Suitability_meeting_date_time__c}),
&quot;NON_PRESENTED&quot;, DATEVALUE({!clientEmailedDateTime}),
null)</expression>
    </formulas>
    <formulas>
        <description>The date on which the advice expires.</description>
        <name>adviceExpiry</name>
        <dataType>Date</dataType>
        <expression>ADDMONTHS({!adviceDate}, 3)</expression>
    </formulas>
    <formulas>
        <description>The month in which the customer should get their annual review.</description>
        <name>annualReviewMonth</name>
        <dataType>String</dataType>
        <expression>IF(MONTH({!adviceDate}) != 3, TEXT(MONTH({!adviceDate})), IF(DAY({!adviceDate}) &lt;= 16, &quot;1&quot;, &quot;2&quot;))</expression>
    </formulas>
    <formulas>
        <description>The date of the customer&#39;s 1st annual review.</description>
        <name>firstAnnualReviewDate</name>
        <dataType>Date</dataType>
        <expression>DATE(YEAR({!adviceDate}) + 1, VALUE({!annualReviewMonth}), 1)</expression>
    </formulas>
    <formulas>
        <name>presented</name>
        <dataType>Boolean</dataType>
        <expression>ISPICKVAL({!advice.AdviceMethod__c}, &quot;Presented&quot;)</expression>
    </formulas>
    <interviewLabel>Advice | Orchestration | Confirm Advice Given {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Advice | Orchestration | Confirm Advice Given</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_advice_recipients</name>
        <label>Create advice recipients</label>
        <locationX>468</locationX>
        <locationY>2798</locationY>
        <connector>
            <targetReference>Update_recommendations</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Set_fault_error</targetReference>
        </faultConnector>
        <inputReference>Call_advice_recipients_flow.adviceRecipients</inputReference>
    </recordCreates>
    <recordUpdates>
        <name>Update_fees</name>
        <label>Update fees</label>
        <locationX>468</locationX>
        <locationY>3014</locationY>
        <connector>
            <targetReference>Decision_outcome</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Set_fault_error</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Draft</stringValue>
            </value>
        </filters>
        <filters>
            <field>Advice__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>adviceId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Await decision</stringValue>
            </value>
        </inputAssignments>
        <object>Fee__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_household</name>
        <label>Update household</label>
        <locationX>468</locationX>
        <locationY>2690</locationY>
        <connector>
            <targetReference>Create_advice_recipients</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Set_fault_error</targetReference>
        </faultConnector>
        <inputReference>household</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_recommendations</name>
        <label>Update recommendations</label>
        <locationX>468</locationX>
        <locationY>2906</locationY>
        <connector>
            <targetReference>Update_fees</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Set_fault_error</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Advice__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>adviceId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Draft</stringValue>
            </value>
        </filters>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Awaiting decision</stringValue>
            </value>
        </inputAssignments>
        <object>Recommendation__c</object>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <screens>
        <name>Confirm_meeting_details</name>
        <label>Confirm meeting details</label>
        <locationX>182</locationX>
        <locationY>350</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Set_presented_values_meeting_held</targetReference>
        </connector>
        <fields>
            <name>adviceMethod</name>
            <choiceReferences>adviceMethodChoice</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>advice.AdviceMethod__c</elementReference>
            </defaultValue>
            <fieldText>How was the advice shared with the customer?</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>SuitabilityMeetingDateTime</name>
            <dataType>DateTime</dataType>
            <defaultValue>
                <elementReference>advice.Suitability_meeting_date_time__c</elementReference>
            </defaultValue>
            <fieldText>Suitability meeting date/time</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isDisabled>
                <booleanValue>true</booleanValue>
            </isDisabled>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Suitability_meeting_location</name>
            <choiceReferences>onlineChoice</choiceReferences>
            <choiceReferences>novaOfficeChoice</choiceReferences>
            <choiceReferences>clientWorkChoice</choiceReferences>
            <choiceReferences>clientHomeChoice</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>advice.Suitability_meeting_location__c</elementReference>
            </defaultValue>
            <fieldText>Confirm suitability meeting location</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>advice.Suitability_meeting_date_time__c</leftValueReference>
                    <operator>IsNull</operator>
                    <rightValue>
                        <booleanValue>false</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>WasTheMeetingObserved</name>
            <choiceReferences>YesObserved</choiceReferences>
            <choiceReferences>NotObserved</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Was the meeting observed?</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>advice.Suitability_meeting_date_time__c</leftValueReference>
                    <operator>IsNull</operator>
                    <rightValue>
                        <booleanValue>false</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>342</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Set_post_sharing_advice_values</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <description>Calls the flow which creates advice recipient records and returns the numbers of clients who have been advised and accepted. If it determines that all advice was declined, the declined flow will be called from there.</description>
        <name>Call_advice_recipients_flow</name>
        <label>Call advice recipients flow</label>
        <locationX>468</locationX>
        <locationY>1058</locationY>
        <connector>
            <targetReference>Presented_Method</targetReference>
        </connector>
        <flowName>AdviceRecipientsCreateAndUpdate</flowName>
        <inputAssignments>
            <name>advice</name>
            <value>
                <elementReference>advice</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>adviceId</name>
            <value>
                <elementReference>adviceId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>calledFromAdviceConfirmation</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>recipientConfirmationNeeded</name>
            <value>
                <elementReference>presented</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Call_decline_advice_flow</name>
        <label>Call decline advice flow</label>
        <locationX>204</locationX>
        <locationY>3230</locationY>
        <flowName>AdviceDeclineAdvice</flowName>
        <inputAssignments>
            <name>advice</name>
            <value>
                <elementReference>advice</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>recordId</name>
            <value>
                <elementReference>adviceId</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <description>If the advice recipients flow determined that some advice has been accepted, the record decisions sub flow is called for these to be marked.</description>
        <name>Call_mark_decisions_flow</name>
        <label>Call mark decisions flow</label>
        <locationX>468</locationX>
        <locationY>3230</locationY>
        <flowName>RecommendationsRecordDecisions</flowName>
        <inputAssignments>
            <name>acceptedClients</name>
            <value>
                <elementReference>Call_advice_recipients_flow.acceptedClients</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>advice</name>
            <value>
                <elementReference>advice</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>numAcceptedClients</name>
            <value>
                <elementReference>Call_advice_recipients_flow.numAcceptedClients</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>numAdvisedClients</name>
            <value>
                <elementReference>Call_advice_recipients_flow.numAdvisedClients</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>numDeclinedClients</name>
            <value>
                <elementReference>Call_advice_recipients_flow.numDeclinedClients</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Confirm_retirement_call</name>
        <label>Confirm retirement call</label>
        <locationX>50</locationX>
        <locationY>674</locationY>
        <connector>
            <targetReference>Set_advice_date</targetReference>
        </connector>
        <flowName>AdviceOrchestrationRetirementCallConfirm</flowName>
        <inputAssignments>
            <name>advice</name>
            <value>
                <elementReference>advice</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>adviceId</name>
            <value>
                <elementReference>adviceId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>adviceType</name>
            <value>
                <elementReference>adviceType</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>adviceUpdated</name>
            <value>
                <elementReference>adviceUpdated</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>householdId</name>
            <value>
                <elementReference>householdId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>task</name>
            <value>
                <elementReference>task</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>adviceUpdated</assignToReference>
            <name>adviceUpdated</name>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>errorMessage</assignToReference>
            <name>errorMessage</name>
        </outputAssignments>
    </subflows>
    <subflows>
        <name>Create_send_dropbox_task</name>
        <label>Create send dropbox task</label>
        <locationX>336</locationX>
        <locationY>1274</locationY>
        <connector>
            <targetReference>Create_suitability_meeting_debrief_task</targetReference>
        </connector>
        <flowName>OW_task_create_from_task_information</flowName>
        <inputAssignments>
            <name>household_id</name>
            <value>
                <elementReference>householdId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>related_advice_id</name>
            <value>
                <elementReference>adviceId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>task_type</name>
            <value>
                <stringValue>PORTAL_DOCS_UPLOAD</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>what_id</name>
            <value>
                <elementReference>adviceId</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Create_suitability_meeting_debrief_task</name>
        <label>Create suitability meeting debrief task</label>
        <locationX>336</locationX>
        <locationY>1382</locationY>
        <connector>
            <targetReference>Set_advice_expiry</targetReference>
        </connector>
        <flowName>OW_task_create_from_task_information</flowName>
        <inputAssignments>
            <name>household_id</name>
            <value>
                <elementReference>householdId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>related_advice_id</name>
            <value>
                <elementReference>adviceId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>task_type</name>
            <value>
                <stringValue>Advice_Meeting_debrief</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>what_id</name>
            <value>
                <elementReference>adviceId</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Create_task</name>
        <label>Create task</label>
        <locationX>336</locationX>
        <locationY>1790</locationY>
        <connector>
            <targetReference>Define_household_record</targetReference>
        </connector>
        <flowName>OW_task_create_from_task_information</flowName>
        <inputAssignments>
            <name>household_id</name>
            <value>
                <elementReference>householdId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>related_advice_id</name>
            <value>
                <elementReference>adviceId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>task_type</name>
            <value>
                <stringValue>chase_recommendation_acceptance</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>what_id</name>
            <value>
                <elementReference>adviceId</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <variables>
        <name>advice</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>adviceDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>adviceId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>adviceType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>adviceUpdated</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>Advice__c</objectType>
    </variables>
    <variables>
        <name>clientEmailedDateTime</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>errorMessage</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>household</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>householdId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>task</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Task</objectType>
    </variables>
</Flow>
